"use strict";(self.webpackChunkweb_client=self.webpackChunkweb_client||[]).push([[785],{1976:(Q,w,o)=>{o.d(w,{e:()=>O});var t=o(1135),e=o(1571),h=o(529);let O=(()=>{class Z{constructor(g){this.http=g,this.templatesBaseUrl="https://app-pulsesurvey-eastus-dev-001.azurewebsites.net",this.templates=new t.X([])}fetchTemplates(){return this.http.get(`${this.templatesBaseUrl}/api/templates`)}updateTemplatesSubject(g){this.templates.next(g)}getTemplates(){return this.templates}getTemplateLookUp(){return this.http.get(`${this.templatesBaseUrl}/api/templates/lookup`)}getTemplateDetailsById(g){return this.http.get(`${this.templatesBaseUrl}/api/templates/${g}`)}getTemplateQuestions(g){return this.http.get(`${this.templatesBaseUrl}/api/templates/${g}/questions`)}updateTemplate(g,T){return this.http.put(`${this.templatesBaseUrl}/api/templates/${g}`,T)}deleteTemplate(g){return this.http.delete(`${this.templatesBaseUrl}/api/templates/${g}`)}}return Z.\u0275fac=function(g){return new(g||Z)(e.LFG(h.eN))},Z.\u0275prov=e.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})()},1789:(Q,w,o)=>{o.d(w,{Sv:()=>f.S,SV:()=>c.SV}),o(7876),o(8127),o(7146),o(4145),o(4025),o(4050),o(3700),o(2270),o(1392),o(474),o(4404);var c=o(9151),f=o(5446)},9151:(Q,w,o)=>{o.d(w,{Tm:()=>h.Tm,SV:()=>h.SV}),o(8331),o(7442);var h=o(4992);o(3448),o(4370),o(8987),o(1888),o(3799),o(6388)},6388:(Q,w,o)=>{o.d(w,{O:()=>g,P:()=>T});var t=o(9151),e=o(1571),h=o(9547),O=o(388),Z=o(1976),q=o(3172);let g=(()=>{class S{constructor(A,c,f){this.surveysDataService=A,this.modalService=c,this.templateService=f,this.rowData=[],this.gridOptions={columnDefs:[{headerName:"Template Title",field:"surveyTitle",width:500,cellRenderer:function(a){return a.data.title+'<br/><p class="text-secondary text-small pt-4">'+a.data.description+"</p>"}},{headerName:"Created On",field:"addedOn",cellRenderer:function(a){return new Date(a.data.addedOn).toDateString()+'<br/><p class="text-secondary text-small pt-4"> by '+a.data.addedBy+"</p>"}},{headerName:"Last Updated On",field:"updatedOn",cellRenderer:function(a){return new Date(a.data.updatedOn).toDateString()+'<br><p class="text-muted text-small"> by '+a.data.updatedBy+"</p>"}},{headerName:"Actions",field:"actions",width:100,cellRenderer:t.Tm,cellRendererParams:{actions:["Update Template","Delete Template"]}}],rowData:[],headerHeight:50,rowHeight:55}}ngOnInit(){this.templateService.fetchTemplates().subscribe(A=>{this.templateService.updateTemplatesSubject(A),this.templateService.getTemplates().subscribe(c=>{this.rowData=c,this.gridOptions.api?.setRowData(this.rowData)})})}gridReady(){this.gridOptions.api?.sizeColumnsToFit()}openCreateSurveyStepper(){this.modalRef=this.modalService.show(t.SV,{class:"full-modal",initialState:{modaltitle:"Create Template",modalButton:"Create Template"}})}}return S.\u0275fac=function(A){return new(A||S)(e.Y36(h._),e.Y36(O.tT),e.Y36(Z.e))},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-general"]],decls:11,vars:2,consts:[[1,"d-flex","justify-content-between","align-items-end"],[1,"text-muted"],[1,"btn","bg-accent-violet","text-white",3,"click"],[1,"card","border-0"],["domLayout","autoHeight",1,"ag-theme-material","h-100","w-100",3,"gridOptions","paginationPageSize","gridReady"]],template:function(A,c){1&A&&(e.TgZ(0,"div",0)(1,"div")(2,"h2"),e._uU(3,"Survey Templates"),e.qZA(),e.TgZ(4,"p",1),e._uU(5,"Here you can configure survey templates that you can directly use while creating surveys."),e.qZA()(),e.TgZ(6,"div")(7,"button",2),e.NdJ("click",function(){return c.openCreateSurveyStepper()}),e._uU(8,"Create New Survey Template"),e.qZA()()(),e.TgZ(9,"div",3)(10,"ag-grid-angular",4),e.NdJ("gridReady",function(){return c.gridReady()}),e.qZA()()),2&A&&(e.xp6(10),e.Q6J("gridOptions",c.gridOptions)("paginationPageSize",10))},dependencies:[q.N8],encapsulation:2}),S})(),T=(()=>{class S{constructor(){}ngOnInit(){}}return S.\u0275fac=function(A){return new(A||S)},S.\u0275cmp=e.Xpm({type:S,selectors:[["app-other"]],decls:2,vars:0,template:function(A,c){1&A&&(e.TgZ(0,"p"),e._uU(1,"other works!"),e.qZA())},encapsulation:2}),S})()},1888:(Q,w,o)=>{o.d(w,{F:()=>q});var t=o(878),e=o(6388),h=o(1571);const Z=[{path:"",component:(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(S){return new(S||g)},g.\u0275cmp=h.Xpm({type:g,selectors:[["app-settings"]],decls:10,vars:0,consts:[[1,"sub-navigation"],[1,"nav","sub-topnav"],["routerLinkActive","active"],["routerLink","general"],["routerLink","other"],[1,"page-container"]],template:function(S,m){1&S&&(h.TgZ(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),h._uU(4,"General"),h.qZA()(),h.TgZ(5,"li",2)(6,"a",4),h._uU(7,"Other"),h.qZA()()()(),h.TgZ(8,"div",5),h._UZ(9,"router-outlet"),h.qZA())},dependencies:[t.lC,t.rH,t.Od],encapsulation:2}),g})(),children:[{path:"general",component:e.O},{path:"other",component:e.P},{path:"",redirectTo:"general",pathMatch:"full"}]}];let q=(()=>{class g{}return g.\u0275fac=function(S){return new(S||g)},g.\u0275mod=h.oAB({type:g}),g.\u0275inj=h.cJS({imports:[t.Bz.forChild(Z),t.Bz]}),g})()},3799:(Q,w,o)=>{o.r(w),o.d(w,{SettingsModule:()=>Z});var t=o(6895),e=o(1888),h=o(3172),O=o(1571);let Z=(()=>{class q{}return q.\u0275fac=function(T){return new(T||q)},q.\u0275mod=O.oAB({type:q}),q.\u0275inj=O.cJS({imports:[t.ez,e.F,h.sF]}),q})()},8987:(Q,w,o)=>{o.d(w,{vh:()=>q,Dq:()=>f,SJ:()=>Y,jH:()=>ce,p1:()=>k});var t=o(4992),e=o(1571),h=o(9547),O=o(388),Z=o(3172);let q=(()=>{class p{constructor(i,l){this.surveysDataService=i,this.modalService=l,this.rowData=[],this.gridOptions={columnDefs:[{headerName:"Survey Title",field:"surveyTitle",width:500,cellRenderer:function(_){return _.data.title+'<br/><p class="text-secondary text-small pt-4">'+_.data.description+"</p>"}},{headerName:"completion",field:"completionPercentage",cellRenderer:function(_){return _.data.completionPercentage+" %"}},{headerName:"Expires On",field:"expiresOn",cellRenderer:function(_){return new Date(_.data.expiresOn).toDateString()}},{headerName:"Launched On",field:"launchedOn",cellRenderer:function(_){return new Date(_.data.launchedOn).toDateString()+'<br><p class="text-secondary text-small"> by '+_.data.launchedBy+"</p>"}},{headerName:"Actions",field:"actions",width:100,cellRenderer:t.Tm,cellRendererParams:{actions:["Update","Close Survey"]}}],rowData:[],headerHeight:50,rowHeight:60}}ngOnInit(){this.surveysDataService.fetchActiveSurveys().subscribe(i=>{this.surveysDataService.updateActiveSubject(i),this.surveysDataService.getActiveSurveys().subscribe(l=>{this.rowData=l,this.gridOptions.api?.setRowData(this.rowData)})})}gridReady(){this.gridOptions.api?.sizeColumnsToFit()}launchNewSurvey(){this.modalRef=this.modalService.show(Y,{class:"modal-dialog-centered"})}}return p.\u0275fac=function(i){return new(i||p)(e.Y36(h._),e.Y36(O.tT))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-active"]],decls:11,vars:2,consts:[[1,"d-flex","justify-content-between","align-items-end"],[1,"text-muted"],[1,"btn","bg-accent-violet","text-white",3,"click"],[1,"card","border-0"],["domLayout","autoHeight",1,"ag-theme-material","h-100","w-100",3,"gridOptions","paginationPageSize","gridReady"]],template:function(i,l){1&i&&(e.TgZ(0,"div",0)(1,"div")(2,"h2"),e._uU(3,"Active Pulse Surveys"),e.qZA(),e.TgZ(4,"p",1),e._uU(5,"Here you can view and manage the pulse surveys that are active."),e.qZA()(),e.TgZ(6,"div")(7,"button",2),e.NdJ("click",function(){return l.launchNewSurvey()}),e._uU(8,"Launch New Survey"),e.qZA()()(),e.TgZ(9,"div",3)(10,"ag-grid-angular",4),e.NdJ("gridReady",function(){return l.gridReady()}),e.qZA()()),2&i&&(e.xp6(10),e.Q6J("gridOptions",l.gridOptions)("paginationPageSize",10))},dependencies:[Z.N8],encapsulation:2}),p})();var g=o(433),T=o(9245),S=o(983),m=o(6895);function A(p,D){if(1&p){const i=e.EpF();e.TgZ(0,"ul",22)(1,"li")(2,"a",23),e.NdJ("click",function(){e.CHM(i);const _=e.oxw();return e.KtG(_.updateFilter(_.getDate(0,0,7),_.today))}),e.TgZ(3,"span"),e._uU(4,"Last Week"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"date"),e.ALo(8,"date"),e.qZA()()(),e.TgZ(9,"li")(10,"a",23),e.NdJ("click",function(){e.CHM(i);const _=e.oxw();return e.KtG(_.updateFilter(_.getDate(0,1,0),_.today))}),e.TgZ(11,"span"),e._uU(12,"Last Month "),e.qZA(),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"date"),e.ALo(16,"date"),e.qZA()()(),e.TgZ(17,"li")(18,"a",23),e.NdJ("click",function(){e.CHM(i);const _=e.oxw();return e.KtG(_.updateFilter(_.getDate(0,3,0),_.today))}),e.TgZ(19,"span"),e._uU(20,"Last 3 Months"),e.qZA(),e.TgZ(21,"span"),e._uU(22),e.ALo(23,"date"),e.ALo(24,"date"),e.qZA()()(),e.TgZ(25,"li")(26,"a",23),e.NdJ("click",function(){e.CHM(i);const _=e.oxw();return e.KtG(_.updateFilter(_.getDate(0,6,0),_.today))}),e.TgZ(27,"span"),e._uU(28,"Last 6 Months"),e.qZA(),e.TgZ(29,"span"),e._uU(30),e.ALo(31,"date"),e.ALo(32,"date"),e.qZA()()(),e.TgZ(33,"li")(34,"a",23),e.NdJ("click",function(){e.CHM(i);const _=e.oxw();return e.KtG(_.updateFilter(_.getDate(1,0,0),_.today))}),e.TgZ(35,"span"),e._uU(36,"Last Year "),e.qZA(),e.TgZ(37,"span"),e._uU(38),e.ALo(39,"date"),e.ALo(40,"date"),e.qZA()()(),e.TgZ(41,"li")(42,"a",23),e.NdJ("click",function(){e.CHM(i),e.oxw();const _=e.MAs(13);return e.KtG(_.toggle())}),e.TgZ(43,"span"),e._uU(44,"Custom Range"),e.qZA()()()()}if(2&p){const i=e.oxw();e.xp6(6),e.AsE("",e.xi3(7,10,i.getDate(0,0,7),"dd MMM")," - ",e.xi3(8,13,i.today,"dd MMM"),""),e.xp6(8),e.AsE("",e.xi3(15,16,i.getDate(0,1,0),"dd MMM")," - ",e.xi3(16,19,i.today,"dd MMM"),""),e.xp6(8),e.AsE("",e.xi3(23,22,i.getDate(0,3,0),"dd MMM")," - ",e.xi3(24,25,i.today,"dd MMM"),""),e.xp6(8),e.AsE("",e.xi3(31,28,i.getDate(0,6,0),"dd MMM")," - ",e.xi3(32,31,i.today,"dd MMM"),""),e.xp6(8),e.AsE("",e.xi3(39,34,i.getDate(1,0,0),"dd MMM")," - ",e.xi3(40,37,i.today,"dd MMM"),"")}}const c=function(){return{dateInputFormat:"DD-MM-YYYY",adaptivePosition:!0}};let f=(()=>{class p{constructor(i){this.surveysDataService=i,this.rowData=[],this.today=new Date,this.filterValue="Launched Between",this.gridOptions={columnDefs:[{headerName:"Survey Title",field:"title",width:350},{headerName:"Launched On",field:"launchedOn",cellRenderer:l=>this.dateNameRenderer(l.data.launchedOn,l.data.launchedBy),getQuickFilterText:l=>this.dateNameRenderer(l.data.launchedOn,l.data.launchedBy)},{headerName:"Closed On",field:"closedOn",cellRenderer:l=>this.dateNameRenderer(l.data.closedOn,l.data.closedBy),getQuickFilterText:l=>this.dateNameRenderer(l.data.closedOn,l.data.closedBy)},{headerName:"completion",field:"completionPercentage",cellRenderer:function(l){return Math.round(l.data.completionPercentage)+" %"},getQuickFilterText:l=>l.data.completionPercentage},{headerName:"Actions",field:"actions",width:100,cellRenderer:t.Tm,cellRendererParams:{actions:["Re-launch Survey","View"]}}],rowData:[],headerHeight:40,rowHeight:55},this.dateNameRenderer=function(l,_){let U=new Date(l).toDateString();return _?U+'<br><p class="text-muted text-small pt-4">by'+_+"</p>":U}}ngOnInit(){this.surveysDataService.fetchClosedSurveys().subscribe(i=>{this.surveysDataService.updateClosedSubject(i),this.surveysDataService.getClosedSurveys().subscribe(l=>{this.rowData=l,this.gridOptions.api?.setRowData(this.rowData)})})}gridReady(i){this.gridApi=i.api,this.gridOptions.api?.sizeColumnsToFit()}onSearchTextChange(){this.gridApi.setQuickFilter(this.searchText)}getDate(i,l,_){return new Date(this.today.getFullYear()-i,this.today.getMonth()-l,this.today.getDate()-_)}updateFilter(i,l){i.setHours(0,0,0,0),l.setHours(23,59,59,999),this.gridOptions.api?.setRowData(this.rowData.filter(_=>{const U=new Date(_.launchedOn);return U>=i&&U<=l})),this.filterValue=this.formatDate(i)+" - "+this.formatDate(l),this.customFilterDates=[]}resetFilter(){this.searchText="",this.gridApi.setQuickFilter(this.searchText),this.filterValue="Launched Between",this.gridOptions.api?.setRowData(this.rowData)}formatDate(i){const l=i.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}).split("-");return`${l[0]} ${l[1]} ${l[2]}`}}return p.\u0275fac=function(i){return new(i||p)(e.Y36(h._))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-closed"]],decls:31,vars:8,consts:[[1,"d-flex","justify-content-between","align-items-end"],[1,"text-muted"],[1,"card","clear-margin-x","clear-margin-b","border-bottom-0"],[1,"card-body","grid-filters","clear-padding"],[1,"report-filters"],[1,"filters-container","ng-star-inserted"],["dropdown","","container","body",1,"filter","dropdown","ng-star-inserted"],["bsDaterangepicker","","readonly","",1,"form-control","border-0","w-200","pointer-events-none","position-absolute",3,"ngModel","maxDate","bsConfig","ngModelChange"],["d","bsDaterangepicker"],["dropdownToggle","","id","dropdown-menu",1,"icon-click","ng-star-inserted","w-250"],[1,"filter-label","text-capitalize"],[1,"ki-arrow-dropdown"],["class","dropdown-menu w-250","aria-labelledby","dropdown-menu",4,"dropdownMenu"],[1,"border-bottom","flex-grow-1"],[1,"input-search"],["type","text","placeholder","Search","name","filter","autocomplete","off",1,"form-control","h-100",3,"ngModel","ngModelChange"],[1,"ki-search","ki","ki-sm"],[1,"filter","ng-star-inserted"],["containerclass","max-w-199","container","body",1,"w-100",3,"click"],[1,"ki","ki-refresh"],[1,"card","border-0","clear-margin"],["domLayout","autoHeight",1,"ag-theme-material","h-100","w-100",3,"gridOptions","paginationPageSize","gridReady"],["aria-labelledby","dropdown-menu",1,"dropdown-menu","w-250"],[1,"dropdown-item","text-capitalize","d-flex","justify-content-between",3,"click"]],template:function(i,l){1&i&&(e.TgZ(0,"div",0)(1,"div")(2,"h2"),e._uU(3,"Closed Pulse Surveys"),e.qZA(),e.TgZ(4,"p",1),e._uU(5,"Here you can view and manage the pulse surveys that are closed."),e.qZA()()(),e.TgZ(6,"div",2)(7,"div",3)(8,"div")(9,"div",4)(10,"div",5)(11,"div",6)(12,"input",7,8),e.NdJ("ngModelChange",function(U){return l.customFilterDates=U})("ngModelChange",function(){return l.updateFilter(l.customFilterDates[0],l.customFilterDates[1])}),e.qZA(),e.TgZ(14,"a",9)(15,"span",10),e._uU(16),e.qZA(),e._UZ(17,"span",11),e.qZA(),e.YNc(18,A,45,40,"ul",12),e.qZA(),e.TgZ(19,"div",13)(20,"div",14)(21,"input",15),e.NdJ("ngModelChange",function(U){return l.searchText=U})("ngModelChange",function(){return l.onSearchTextChange()}),e.qZA(),e._UZ(22,"span",16),e.qZA()(),e.TgZ(23,"div",17)(24,"a",18),e.NdJ("click",function(){return l.resetFilter()}),e._UZ(25,"span",19),e.TgZ(26,"span")(27,"span",10),e._uU(28,"Reset"),e.qZA()()()()()()()()(),e.TgZ(29,"div",20)(30,"ag-grid-angular",21),e.NdJ("gridReady",function(U){return l.gridReady(U)}),e.qZA()()),2&i&&(e.xp6(12),e.Q6J("ngModel",l.customFilterDates)("maxDate",l.today)("bsConfig",e.DdM(7,c)),e.xp6(4),e.Oqu(l.filterValue),e.xp6(5),e.Q6J("ngModel",l.searchText),e.xp6(9),e.Q6J("gridOptions",l.gridOptions)("paginationPageSize",10))},dependencies:[Z.N8,g.Fj,g.JJ,g.On,T.Hz,T.Mq,T.TO,S.FR,S.TB,m.uU],encapsulation:2}),p})();var a=o(1789),x=o(1976),N=o(4349);function R(p,D){1&p&&(e.TgZ(0,"p",11),e._uU(1,"*Required"),e.qZA())}function F(p,D){if(1&p){const i=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"label"),e._uU(3,"Select an Option"),e.qZA(),e.TgZ(4,"ng-select",9),e.NdJ("ngModelChange",function(_){e.CHM(i);const U=e.oxw();return e.KtG(U.selectedTemplate=_)}),e.qZA(),e.YNc(5,R,2,0,"p",10),e.qZA()()}if(2&p){const i=e.oxw();e.xp6(4),e.Q6J("items",i.templates)("ngModel",i.selectedTemplate),e.xp6(1),e.Q6J("ngIf",i.isSubmitted&&!i.selectedTemplate)}}let Y=(()=>{class p{constructor(i,l,_,U){this.modalRef=i,this.modalService=l,this.surveyService=_,this.templateService=U,this.isSubmitted=!1,this.templates=[]}ngOnInit(){this.templateService.getTemplateLookUp().subscribe(i=>{this.templates=i,console.log(this.templates,"launch select"),this.templates.unshift({id:"-1",title:"Create a new Template and Launch"})})}launch(){this.isSubmitted=!0,null!=this.selectedTemplate&&(this.modalService.show(a.SV,{class:"full-modal",initialState:{modaltitle:"Launch Survey",modalButton:"Launch",templateId:this.selectedTemplate}}),this.modalRef.hide())}ngOnDestroy(){this.templates.shift()}}return p.\u0275fac=function(i){return new(i||p)(e.Y36(O.UZ),e.Y36(O.tT),e.Y36(h._),e.Y36(x.e))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-launch-survey-select"]],decls:10,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],[1,"ki","ki-close",3,"click"],["class","modal-body",4,"ngIf"],[1,"modal-footer","p-20"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"modal-body"],[1,"form-group"],["bindLabel","title","bindValue","id","placeholder","Select",3,"items","ngModel","ngModelChange"],["class","pt-4 text-danger",4,"ngIf"],[1,"pt-4","text-danger"]],template:function(i,l){1&i&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Launch a new Survey"),e.qZA(),e.TgZ(3,"span",2),e.NdJ("click",function(){return l.modalRef.hide()}),e.qZA()(),e.YNc(4,F,6,3,"div",3),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return l.modalRef.hide()}),e._uU(7,"Cancel"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return l.launch()}),e._uU(9,"Launch"),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("ngIf",null!=l.templates))},dependencies:[m.O5,N.w9,g.JJ,g.On],encapsulation:2}),p})();var V=o(878),j=o(529);let K=(()=>{class p{constructor(i){this.http=i,this.questionsBaseUrl="https://app-pulsesurvey-eastus-dev-001.azurewebsites.net"}getSurveyResponses(i){return this.http.get(`${this.questionsBaseUrl}/api/surveys/${i}/responses`)}getQuestionResponses(i,l){return this.http.get(`${this.questionsBaseUrl}/api/surveys/${i}/responses/${l}`)}}return p.\u0275fac=function(i){return new(i||p)(e.LFG(j.eN))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();var G=o(4175);function X(p,D){1&p&&e._UZ(0,"div",19)}function ee(p,D){1&p&&e._UZ(0,"div",20)}function te(p,D){1&p&&(e.TgZ(0,"span"),e._uU(1,"Text"),e.qZA())}function z(p,D){1&p&&(e.TgZ(0,"span"),e._uU(1,"Rating"),e.qZA())}function L(p,D){1&p&&(e.TgZ(0,"span"),e._uU(1,"Select From List"),e.qZA())}function ne(p,D){if(1&p&&(e.TgZ(0,"div",11)(1,"p"),e._uU(2,"Average Rating"),e.qZA(),e.TgZ(3,"div",13),e._UZ(4,"progressbar",27),e.TgZ(5,"p",28),e._uU(6),e.ALo(7,"percent"),e.qZA()()()),2&p){const i=e.oxw().$implicit;e.xp6(4),e.Q6J("value",10*i.averageRating),e.xp6(2),e.Oqu(e.xi3(7,2,i.averageRating/10,"1."))}}function ie(p,D){if(1&p&&(e.TgZ(0,"div",30)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"div",13),e._UZ(4,"progressbar",27),e.TgZ(5,"p",28),e._uU(6),e.ALo(7,"percent"),e.qZA()()()),2&p){const i=D.$implicit;e.xp6(2),e.Oqu(i.text),e.xp6(2),e.Q6J("value",+i.percentage),e.xp6(2),e.Oqu(e.xi3(7,3,i.percentage/100,"1."))}}function oe(p,D){if(1&p&&(e.TgZ(0,"div",11),e.YNc(1,ie,8,6,"div",29),e.qZA()),2&p){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",i.optionPercentage)}}function se(p,D){if(1&p){const i=e.EpF();e.TgZ(0,"div")(1,"div",22)(2,"div",23)(3,"p",17)(4,"span"),e._uU(5),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"p",24),e._uU(8,"Response type: "),e.YNc(9,te,2,0,"span",18),e.YNc(10,z,2,0,"span",18),e.YNc(11,L,2,0,"span",18),e.qZA(),e.YNc(12,ne,8,5,"div",25),e.YNc(13,oe,2,1,"div",25),e.TgZ(14,"a",26),e.NdJ("click",function(){const U=e.CHM(i).$implicit,P=e.oxw(3);return e.KtG(P.seeMoreDetails(U))}),e._uU(15,"See more details"),e.qZA()()()()}if(2&p){const i=D.$implicit;e.xp6(5),e.hij("",i.sequence,"."),e.xp6(1),e.hij(" ",i.text," ? "),e.xp6(3),e.Q6J("ngIf",0==i.type),e.xp6(1),e.Q6J("ngIf",1==i.type),e.xp6(1),e.Q6J("ngIf",2==i.type),e.xp6(1),e.Q6J("ngIf",1==i.type),e.xp6(1),e.Q6J("ngIf",2==i.type)}}function W(p,D){if(1&p&&(e.TgZ(0,"div"),e.YNc(1,se,16,7,"div",21),e.qZA()),2&p){const i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",i.questions)}}const ue=function(){return["../.."]};function H(p,D){if(1&p&&(e.TgZ(0,"div",1)(1,"div",2)(2,"a",3),e._UZ(3,"span",4),e.TgZ(4,"span",5),e._uU(5,"Back to List"),e.qZA()()(),e.TgZ(6,"div",6)(7,"div",7)(8,"div",8)(9,"h4",9),e._uU(10),e.qZA()(),e.TgZ(11,"div",10)(12,"div",11)(13,"label",12),e._uU(14,"status"),e.qZA(),e.TgZ(15,"div",13),e.YNc(16,X,1,0,"div",14),e.YNc(17,ee,1,0,"div",15),e.TgZ(18,"p",16),e._uU(19,"Closed"),e.qZA()()(),e.TgZ(20,"div",11)(21,"label",12),e._uU(22,"expired on"),e.qZA(),e.TgZ(23,"p",17),e._uU(24),e.ALo(25,"date"),e.qZA()(),e.TgZ(26,"div",11)(27,"label",12),e._uU(28,"launched on"),e.qZA(),e.TgZ(29,"p",17),e._uU(30),e.ALo(31,"date"),e.qZA()(),e.TgZ(32,"div",11)(33,"label",12),e._uU(34,"launched by"),e.qZA(),e.TgZ(35,"p",17),e._uU(36),e.qZA()(),e.TgZ(37,"div",11)(38,"label",12),e._uU(39,"completion"),e.qZA(),e.TgZ(40,"p",17),e._uU(41),e.qZA()()()()(),e.YNc(42,W,2,1,"div",18),e.qZA()),2&p){const i=e.oxw();e.xp6(2),e.Q6J("routerLink",e.DdM(15,ue)),e.xp6(8),e.Oqu(i.survey.title),e.xp6(6),e.Q6J("ngIf",0==i.survey.status),e.xp6(1),e.Q6J("ngIf",1==i.survey.status),e.xp6(7),e.Oqu(e.xi3(25,9,i.survey.expiresOn,"MMM dd, yyyy")),e.xp6(6),e.Oqu(e.xi3(31,12,i.survey.expiresOn,"MMM dd, yyyy")),e.xp6(6),e.Oqu(i.survey.launchedBy),e.xp6(5),e.hij("",i.survey.completionPercentage," %"),e.xp6(1),e.Q6J("ngIf",null!=i.questions)}}let k=(()=>{class p{constructor(i,l,_,U,P){this.activatedRoute=i,this.surveyDataService=l,this.modalRef=_,this.modalService=U,this.questionService=P}ngOnInit(){this.activatedRoute.paramMap.subscribe(i=>{this.surveyId=i.get("id"),this.surveyDataService.getViewSurveyDetails(this.surveyId).subscribe(l=>{this.survey=l}),this.questionService.getSurveyResponses(this.surveyId).subscribe(l=>{this.questions=l})})}seeMoreDetails(i){this.modalRef=this.modalService.show(ce,{class:"right-modal",initialState:{question:i,questions:this.questions,surveyId:this.surveyId}})}}return p.\u0275fac=function(i){return new(i||p)(e.Y36(V.gz),e.Y36(h._),e.Y36(O.UZ),e.Y36(O.tT),e.Y36(K))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-view-survey-details"]],decls:1,vars:1,consts:[["class","",4,"ngIf"],[1,""],[1,"d-flex","align-items-center","text-link","mb-20"],[1,"d-flex","align-items-center",3,"routerLink"],[1,"ki","ki-arrow-backward","ki-md","mr-4","text-accent-violet"],[1,"text-large","text-accent-violet"],[1,"card","clear-margin-x"],[1,"card-body","clear-margin-x"],[1,"data-block","mb-20"],[1,"text-capitalize"],[1,"data-bar","single-line-bar","d-flex","w-75","justify-content-between"],[1,"data-block"],[1,"data-label"],[1,"d-flex","align-items-center"],["class","dot bg-red",4,"ngIf"],["class","dot bg-green",4,"ngIf"],[1,"ml-10","text-large"],[1,"text-large"],[4,"ngIf"],[1,"dot","bg-red"],[1,"dot","bg-green"],[4,"ngFor","ngForOf"],[1,"card","w-75","clear-margin-x"],[1,"card-body"],[1,"text-secondary","mb-20"],["class","data-block",4,"ngIf"],[1,"text-accent-violet",3,"click"],[1,"progress","progress-accent-violet","w-50",3,"value"],[1,"text-large","ml-10"],["class","mb-20",4,"ngFor","ngForOf"],[1,"mb-20"]],template:function(i,l){1&i&&e.YNc(0,H,43,16,"div",0),2&i&&e.Q6J("ngIf",void 0!==l.survey)},dependencies:[m.sg,m.O5,V.rH,G.O1,m.Zx,m.uU],encapsulation:2}),p})();function re(p,D){1&p&&(e.TgZ(0,"span"),e._uU(1,"Text"),e.qZA())}function $(p,D){1&p&&(e.TgZ(0,"span"),e._uU(1,"Rating"),e.qZA())}function u(p,D){1&p&&(e.TgZ(0,"span"),e._uU(1,"Select From List"),e.qZA())}function b(p,D){1&p&&(e.TgZ(0,"div",19)(1,"div",20)(2,"p"),e._uU(3,"Analytical View is Unavailable for Text Responses"),e.qZA()()())}function r(p,D){if(1&p&&(e.TgZ(0,"div",21)(1,"p"),e._uU(2,"Average Rating"),e.qZA(),e.TgZ(3,"div",22),e._UZ(4,"progressbar",23),e.TgZ(5,"p",24),e._uU(6),e.qZA()()()),2&p){const i=e.oxw(2);e.xp6(4),e.Q6J("value",10*i.question.averageRating),e.xp6(2),e.hij("",i.question.averageRating," / 10")}}function y(p,D){if(1&p&&(e.TgZ(0,"div",26)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"div",22),e._UZ(4,"progressbar",23),e.TgZ(5,"p",24),e._uU(6),e.qZA()()()),2&p){const i=D.$implicit;e.xp6(2),e.Oqu(i.text),e.xp6(2),e.Q6J("value",+i.percentage),e.xp6(2),e.hij("",i.percentage,"%")}}function M(p,D){if(1&p&&(e.TgZ(0,"div",21),e.YNc(1,y,7,3,"div",25),e.qZA()),2&p){const i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",i.question.optionPercentage)}}function E(p,D){if(1&p&&(e.TgZ(0,"div",9),e.YNc(1,b,4,0,"div",16),e.YNc(2,r,7,2,"div",17),e.YNc(3,M,2,1,"div",18),e.qZA()),2&p){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",0==i.question.type),e.xp6(1),e.Q6J("ngIf",1==i.question.type),e.xp6(1),e.Q6J("ngIf",2==i.question.type)}}function ae(p,D){if(1&p){const i=e.EpF();e.TgZ(0,"div",27)(1,"form",28)(2,"div",29),e._UZ(3,"span",30),e.TgZ(4,"input",31),e.NdJ("ngModelChange",function(_){e.CHM(i);const U=e.oxw();return e.KtG(U.searchText=_)})("ngModelChange",function(){e.CHM(i);const _=e.oxw();return e.KtG(_.onSearchTextChange())}),e.qZA()()(),e.TgZ(5,"ag-grid-angular",32),e.NdJ("gridReady",function(_){e.CHM(i);const U=e.oxw();return e.KtG(U.gridReady(_))}),e.qZA()()}if(2&p){const i=e.oxw();e.xp6(4),e.Q6J("ngModel",i.searchText),e.xp6(1),e.Q6J("gridOptions",i.gridOptions)("paginationPageSize",10)}}let ce=(()=>{class p{constructor(i,l,_){this.modalRef=i,this.surveysService=l,this.questionService=_,this.toggleView=1,this.gridOptions={columnDefs:[],rowData:[],headerHeight:35,rowHeight:55}}ngOnInit(){this.currentSequenceNumber=this.question.sequence}gridReady(i){this.gridOptions.api?.sizeColumnsToFit(),this.gridApi=i.api,this.getQuestionDetails()}getQuestionDetails(){this.questionService.getQuestionResponses(this.surveyId,this.question.questionId).subscribe(i=>{console.log(i),this.userResponse=i,this.setColDefs()})}setColDefs(){if(this.gridOptions.api?.setColumnDefs([]),1==this.question.type||0==this.question.type){const i={headerName:"username",field:"name"},l={headerName:0==this.question.type?"Comment":"Rating",field:0==this.question.type?"comment":"rating"};0==this.question.type?(this.gridOptions.api?.setColumnDefs([i,l]),this.gridOptions.api?.setRowData(this.userResponse?.commentResponse)):(this.gridOptions.api?.setColumnDefs(this.question.isCommentRequired?[i,l,{headerName:"Comment",field:"comment"}]:[i,l]),this.gridOptions.api?.setRowData(this.userResponse?.commentRatingResponse))}else 2==this.question.type&&this.userResponse?.optionResponse?.map(i=>{this.addColumn(i.text,i.users)});this.gridOptions.api?.sizeColumnsToFit()}addColumn(i,l){this.gridOptions.columnDefs?.push({headerName:i,field:i}),this.gridOptions.api?.setColumnDefs([...this.gridOptions.columnDefs]);const U=this.gridOptions.rowData;l.forEach((P,le)=>{U[le]={...U[le],[i]:P.name}}),this.gridApi.setRowData(U)}findIndex(i){return this.questions.findIndex(l=>l.sequence==this.question.sequence)}viewPreviousQuestion(){let i=this.findIndex(this.question);i>0&&(i--,this.question=this.questions[i],this.currentSequenceNumber=this.question.sequence,this.toggleView=1)}viewNextQuestion(){let i=this.findIndex(this.question);i<this.questions.length-1&&(i++,this.question=this.questions[i],this.currentSequenceNumber=this.question.sequence,this.toggleView=1)}onSelect(){this.question=this.questions.find(i=>i.sequence==this.currentSequenceNumber),this.toggleView=1}onSearchTextChange(){this.gridApi.setQuickFilter(this.searchText)}}return p.\u0275fac=function(i){return new(i||p)(e.Y36(O.UZ),e.Y36(h._),e.Y36(K))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-view-question-details"]],decls:25,vars:11,consts:[[1,"modal-header"],[1,"modal-title"],[1,"ki","ki-close",3,"click"],[1,"modal-body"],[1,"form-group","d-flex"],["bindValue","sequence","bindLabel","sequence","placeholder","Select",1,"w-150",3,"items","ngModel","ngModelChange","change"],[1,"pt-8"],[1,"ki","bg-secondary","ki-chevron-left","mx-10",3,"click"],[1,"ki","bg-secondary","ki-chevron-right","mx-10",3,"click"],[1,""],[1,"text-secondary","mb-20"],[4,"ngIf"],[1,"btn-group","btn-group-secondary"],[1,"btn","border-1","btn-sm",3,"ngClass","click"],["class","",4,"ngIf"],["class","card",4,"ngIf"],["class","card  clear-margin-x bg-secondary",4,"ngIf"],["class","mt-20 p-12 bg-secondary",4,"ngIf"],["class","mt-20 p-12 bg-secondary ",4,"ngIf"],[1,"card","clear-margin-x","bg-secondary"],[1,"card-body","text-center"],[1,"mt-20","p-12","bg-secondary"],[1,"d-flex","align-items-center"],[1,"progress","progress-accent-violet","w-50",3,"value"],[1,"text-large","ml-10"],["class","mb-20",4,"ngFor","ngForOf"],[1,"mb-20"],[1,"card"],["novalidate","","role","search",1,"form-inline","my-10","d-flex","justify-content-end"],[1,"input-search","w-25"],[1,"ki-search","ki","ki-sm"],["placeholder","Search","name","searchText",1,"form-control","border-0","border-bottom",3,"ngModel","ngModelChange"],["domLayout","autoHeight",1,"ag-theme-material","h-100","w-100",3,"gridOptions","paginationPageSize","gridReady"]],template:function(i,l){1&i&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Question Details"),e.qZA(),e.TgZ(3,"span",2),e.NdJ("click",function(){return l.modalRef.hide()}),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"ng-select",5),e.NdJ("ngModelChange",function(U){return l.currentSequenceNumber=U})("change",function(){return l.onSelect()}),e.qZA(),e.TgZ(7,"div",6)(8,"span",7),e.NdJ("click",function(){return l.viewPreviousQuestion()}),e.qZA(),e.TgZ(9,"span",8),e.NdJ("click",function(){return l.viewNextQuestion()}),e.qZA()()(),e.TgZ(10,"div",9)(11,"h3"),e._uU(12),e.qZA(),e.TgZ(13,"p",10),e._uU(14,"Response type: "),e.YNc(15,re,2,0,"span",11),e.YNc(16,$,2,0,"span",11),e.YNc(17,u,2,0,"span",11),e.qZA()(),e.TgZ(18,"div",12)(19,"button",13),e.NdJ("click",function(){return l.toggleView=1}),e._uU(20,"Analytical"),e.qZA(),e.TgZ(21,"button",13),e.NdJ("click",function(){return l.toggleView=2}),e._uU(22,"Detailed"),e.qZA()(),e.YNc(23,E,4,3,"div",14),e.YNc(24,ae,6,3,"div",15),e.qZA()),2&i&&(e.xp6(6),e.Q6J("items",l.questions)("ngModel",l.currentSequenceNumber),e.xp6(6),e.AsE("",l.question.sequence,". ",l.question.text,""),e.xp6(3),e.Q6J("ngIf",0==l.question.type),e.xp6(1),e.Q6J("ngIf",1==l.question.type),e.xp6(1),e.Q6J("ngIf",2==l.question.type),e.xp6(2),e.Q6J("ngClass",1==l.toggleView?"bg-accent-violet text-white ":"bg-secondary"),e.xp6(2),e.Q6J("ngClass",2==l.toggleView?"bg-accent-violet text-white":"bg-secondary"),e.xp6(2),e.Q6J("ngIf",1==l.toggleView),e.xp6(1),e.Q6J("ngIf",2==l.toggleView))},dependencies:[m.mk,m.sg,m.O5,Z.N8,N.w9,G.O1,g._Y,g.Fj,g.JJ,g.JL,g.On,g.F],encapsulation:2}),p})()},3448:(Q,w,o)=>{o.d(w,{e:()=>q});var t=o(878),e=o(8987),h=o(1571);const Z=[{path:"",component:(()=>{class g{constructor(){}ngOnInit(){}}return g.\u0275fac=function(S){return new(S||g)},g.\u0275cmp=h.Xpm({type:g,selectors:[["app-surveys"]],decls:10,vars:0,consts:[[1,"sub-navigation"],[1,"nav","sub-topnav"],["routerLinkActive","active"],["routerLink","active"],["routerLink","closed"],[1,"page-container"]],template:function(S,m){1&S&&(h.TgZ(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),h._uU(4,"Active"),h.qZA()(),h.TgZ(5,"li",2)(6,"a",4),h._uU(7,"Closed"),h.qZA()()()(),h.TgZ(8,"div",5),h._UZ(9,"router-outlet"),h.qZA())},dependencies:[t.lC,t.rH,t.Od],encapsulation:2}),g})(),children:[{path:"active",component:e.vh},{path:"closed",component:e.Dq},{path:"closed/view/:id",component:e.p1},{path:"",redirectTo:"active",pathMatch:"full"}]}];let q=(()=>{class g{}return g.\u0275fac=function(S){return new(S||g)},g.\u0275mod=h.oAB({type:g}),g.\u0275inj=h.cJS({imports:[t.Bz.forChild(Z),t.Bz]}),g})()},4370:(Q,w,o)=>{o.r(w),o.d(w,{SurveysModule:()=>m});var t=o(6895),e=o(3172),h=o(433),O=o(9245),Z=o(4175),q=o(4349),g=o(983),T=o(3448),S=o(1571);let m=(()=>{class A{}return A.\u0275fac=function(f){return new(f||A)},A.\u0275mod=S.oAB({type:A}),A.\u0275inj=S.cJS({imports:[t.ez,T.e,e.sF,q.A0,Z.HC.forRoot(),h.u5,O.mr,g.kn.forRoot()]}),A})()},4992:(Q,w,o)=>{o.d(w,{Tm:()=>S,SV:()=>le});var t=o(5446),e=o(1571),h=o(388),O=o(878),Z=o(6895),q=o(9245);function g(s,v){if(1&s){const n=e.EpF();e.TgZ(0,"li")(1,"a",6),e.NdJ("click",function(){const I=e.CHM(n).$implicit,J=e.oxw(2);return e.KtG(J.performAction(I))}),e._uU(2),e.qZA()()}if(2&s){const n=v.$implicit;e.xp6(2),e.Oqu(n)}}function T(s,v){if(1&s&&(e.TgZ(0,"ul",4),e.YNc(1,g,3,1,"li",5),e.qZA()),2&s){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.actions)}}let S=(()=>{class s{constructor(n,d,C){this.modalService=n,this.router=d,this.activatedRoute=C}agInit(n){this.params=n,this.actions=this.params.actions}refresh(n){return this.params=n,!1}performAction(n){"Update"===n?this.updateSurveyDetails():"Close Survey"===n?this.showConfirmation("close"):"Re-launch Survey"===n?this.reLaunchSurvey():"View"===n?this.router.navigate(["view",this.params.data.id],{relativeTo:this.activatedRoute}):"Update Template"==n?this.modalRef=this.modalService.show(le,{class:"full-modal",initialState:{modaltitle:"Update Template",modalButton:"Save & Close",templateId:this.params.data.id}}):this.showConfirmation("delete")}showConfirmation(n){this.modalRef=this.modalService.show(t.S,{class:"modal-dialog-centered",initialState:{action:n,selectedSurveyId:this.params.data.id}})}updateSurveyDetails(){this.modalRef=this.modalService.show(pe,{class:"modal-dialog-centered",initialState:{modaltitle:"Update Survey",modalButton:"Update",selectedSurveyId:this.params.data.id}})}reLaunchSurvey(){this.modalRef=this.modalService.show(pe,{class:"modal-dialog-centered",initialState:{modaltitle:"Re-launch Survey",modalButton:"Relaunch",selectedSurveyId:this.params.data.id}})}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(h.tT),e.Y36(O.F0),e.Y36(O.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-actions-dropdown-grid-child"]],decls:4,vars:0,consts:[["dropdown","","container","body",1,"dropdown"],["dropdownToggle","","id","menu","aria-haspopup","true","aria-expanded","false",1,"icon-click"],[1,"ki","ki-ellipses-solid"],["class","dropdown-menu dropdown-menu-right","aria-labelledby","menu",4,"dropdownMenu"],["aria-labelledby","menu",1,"dropdown-menu","dropdown-menu-right"],[4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"]],template:function(n,d){1&n&&(e.TgZ(0,"div",0)(1,"a",1),e._UZ(2,"span",2),e.qZA(),e.YNc(3,T,2,1,"ul",3),e.qZA())},dependencies:[Z.sg,q.Hz,q.Mq,q.TO],encapsulation:2}),s})();var m=o(433);function A(s,v){1&s&&(e.TgZ(0,"span",8),e._uU(1,"*Required"),e.qZA())}function c(s,v){1&s&&(e.TgZ(0,"span",8),e._uU(1,"*Required"),e.qZA())}function f(s,v){1&s&&(e.TgZ(0,"span",8),e._uU(1,"*Required"),e.qZA())}function a(s,v){if(1&s&&(e.TgZ(0,"div",2)(1,"label",9),e._uU(2,"The survey expires on"),e.qZA(),e.TgZ(3,"div",10),e._UZ(4,"input",11),e.YNc(5,f,2,0,"span",5),e.qZA()()),2&s){const n=e.oxw(2);e.xp6(5),e.Q6J("ngIf",n.newSurveyDetails.get("expiresOn").touched&&n.newSurveyDetails.get("expiresOn").errors)}}const x=function(s){return{"is-invalid":s}};function N(s,v){if(1&s&&(e.TgZ(0,"form",1)(1,"div",2)(2,"label",3),e._uU(3,"Title of this survey"),e.qZA(),e._UZ(4,"input",4),e.YNc(5,A,2,0,"span",5),e.qZA(),e.TgZ(6,"div",2)(7,"label",3),e._uU(8,"Description"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,c,2,0,"span",5),e.qZA(),e.YNc(11,a,6,1,"div",7),e.qZA()),2&s){const n=e.oxw();e.Q6J("formGroup",n.newSurveyDetails),e.xp6(4),e.Q6J("ngClass",e.VKq(6,x,n.newSurveyDetails.get("title").touched&&n.newSurveyDetails.get("title").errors)),e.xp6(1),e.Q6J("ngIf",n.newSurveyDetails.get("title").touched&&n.newSurveyDetails.get("title").errors),e.xp6(4),e.Q6J("ngClass",e.VKq(8,x,n.newSurveyDetails.get("description").touched&&n.newSurveyDetails.get("description").errors)),e.xp6(1),e.Q6J("ngIf",n.newSurveyDetails.get("description").touched&&n.newSurveyDetails.get("description").errors),e.xp6(1),e.Q6J("ngIf","Save & Close"!=n.action&&"Create Template"!=n.action)}}let R=(()=>{class s{constructor(){}ngOnInit(){console.log(this.action),this.intializeForm(this.survey)}intializeForm(n){if(this.newSurveyDetails=new m.cw({title:new m.NI(`${n?.title??""}`,[m.kI.required]),description:new m.NI(`${n?.description??""}`,[m.kI.required])}),"Save & Close"!=this.action&&"Create Template"!=this.action){const d=new m.NI(`${n?.expiresOn??""}`,[m.kI.required]);this.newSurveyDetails.addControl("expiresOn",d)}}validateForm(){return this.newSurveyDetails.markAllAsTouched(),this.newSurveyDetails.valid}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-create-survey-details"]],inputs:{survey:"survey",action:"action"},decls:1,vars:1,consts:[["action","","class","w-500",3,"formGroup",4,"ngIf"],["action","",1,"w-500",3,"formGroup"],[1,"form-group"],[1,"text-secondary"],["type","text","formControlName","title",1,"form-control","input-sm",3,"ngClass"],["class"," mt-20 text-danger",4,"ngIf"],["type","text","formControlName","description",1,"form-control","input",3,"ngClass"],["class","form-group",4,"ngIf"],[1,"mt-20","text-danger"],["for","DateAssigned "],[1,"input-calendar","col-sm-4","clear-padding-x"],["type","date","id","DateAssigned","formControlName","expiresOn",1,"form-control"]],template:function(n,d){1&n&&e.YNc(0,N,12,10,"form",0),2&n&&e.Q6J("ngIf",d.newSurveyDetails)},dependencies:[Z.mk,Z.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u],encapsulation:2}),s})();var F=o(9547),Y=o(5241);function V(s,v){1&s&&(e.TgZ(0,"span",5),e._uU(1,"*Minimum 1 Question is Mandatory for Launching a Survey"),e.qZA())}function j(s,v){1&s&&(e.TgZ(0,"span",29),e._uU(1,"* Required"),e.qZA())}function K(s,v){1&s&&e._UZ(0,"input",30)}function G(s,v){if(1&s){const n=e.EpF();e.TgZ(0,"label",31),e.NdJ("click",function(){e.CHM(n);const C=e.oxw().$implicit;return e.KtG(C.get("AddDescription").setValue(!0))}),e._uU(1,"+Add Additional Description"),e.qZA()}}function X(s,v){1&s&&(e.TgZ(0,"div",32)(1,"div",14)(2,"label"),e._uU(3,"'0'- Label"),e.qZA(),e._UZ(4,"input",33),e.qZA(),e._UZ(5,"div",34),e.TgZ(6,"div",14)(7,"label"),e._uU(8,"'10'- Label"),e.qZA(),e._UZ(9,"input",35),e.qZA()())}function ee(s,v){1&s&&(e.TgZ(0,"span",5),e._uU(1,"* Required"),e.qZA())}function te(s,v){1&s&&(e.TgZ(0,"p",5),e._uU(1,"Max Options :5"),e.qZA())}const z=function(s){return{"is-invalid":s}};function L(s,v){if(1&s){const n=e.EpF();e.TgZ(0,"div")(1,"div",39),e._UZ(2,"input",40),e.TgZ(3,"span",41),e.NdJ("click",function(){const I=e.CHM(n).index,J=e.oxw(2).index,B=e.oxw();return e.KtG(B.removeSelectOption(J,I))}),e.qZA()(),e.YNc(4,ee,2,0,"span",1),e.YNc(5,te,2,0,"p",1),e.qZA()}if(2&s){const n=v.$implicit,d=v.index;e.xp6(1),e.Q6J("formGroupName",d),e.xp6(1),e.Q6J("ngClass",e.VKq(4,z,n.get("text").touched&&n.get("text").errors)),e.xp6(2),e.Q6J("ngIf",n.get("text").touched&&n.get("text").errors),e.xp6(1),e.Q6J("ngIf",d>=4)}}function ne(s,v){1&s&&(e.TgZ(0,"span",5),e._uU(1,"* Minimum 2 Options are Required"),e.qZA())}function ie(s,v){if(1&s){const n=e.EpF();e.TgZ(0,"div",36),e.YNc(1,L,6,6,"div",37),e.YNc(2,ne,2,0,"span",1),e.TgZ(3,"p",38),e.NdJ("click",function(){e.CHM(n);const C=e.oxw().index,I=e.oxw();return e.KtG(I.addSelectOption(C))}),e._uU(4,"+Add more Options"),e.qZA()()}if(2&s){const n=e.oxw(),d=n.index,C=n.$implicit,I=e.oxw();e.xp6(1),e.Q6J("ngForOf",I.selectOptions(d).controls),e.xp6(1),e.Q6J("ngIf",C.value.options.length<=1)}}function oe(s,v){if(1&s&&(e.TgZ(0,"div",42),e._UZ(1,"input",43),e.TgZ(2,"label",22),e._uU(3,"Take a Comment Along with the Rating"),e.qZA()()),2&s){const n=e.oxw().index;e.xp6(1),e.MGl("id","optionalComment",n,""),e.xp6(1),e.MGl("for","optionalComment",n,"")}}function se(s,v){if(1&s){const n=e.EpF();e.TgZ(0,"div",6)(1,"accordion-group",7)(2,"div",8)(3,"div",9)(4,"p",10),e._uU(5),e.qZA()(),e._UZ(6,"span",11)(7,"span",12),e.qZA(),e.TgZ(8,"div",13)(9,"div",14),e._UZ(10,"input",15),e.YNc(11,j,2,0,"span",16),e.qZA(),e.TgZ(12,"div",14),e.YNc(13,K,1,0,"input",17),e.YNc(14,G,2,0,"label",18),e.qZA(),e.TgZ(15,"div",14)(16,"label",19),e._uU(17,"How do you want the employees to respond to this question ?"),e.qZA(),e.TgZ(18,"div",20)(19,"input",21),e.NdJ("change",function(){const C=e.CHM(n),I=C.$implicit,J=C.index,B=e.oxw();return e.KtG(B.addSelectOptions(I.value.type,J))}),e.qZA(),e.TgZ(20,"label",22),e._uU(21,"Rating"),e.qZA(),e.TgZ(22,"input",23),e.NdJ("change",function(){const C=e.CHM(n),I=C.$implicit,J=C.index,B=e.oxw();return e.KtG(B.addSelectOptions(I.value.type,J))}),e.qZA(),e.TgZ(23,"label",22),e._uU(24,"Comment Only"),e.qZA(),e.TgZ(25,"input",24),e.NdJ("change",function(){const C=e.CHM(n),I=C.$implicit,J=C.index,B=e.oxw();return e.KtG(B.addSelectOptions(I.value.type,J))}),e.qZA(),e.TgZ(26,"label",22),e._uU(27,"Select From List"),e.qZA()()(),e.YNc(28,X,10,0,"div",25),e.YNc(29,ie,5,2,"div",26),e.YNc(30,oe,4,2,"div",27),e.qZA()(),e.TgZ(31,"span",28),e.NdJ("click",function(){const I=e.CHM(n).index,J=e.oxw();return e.KtG(J.removeQuestion(I))}),e.qZA()()}if(2&s){const n=v.$implicit,d=v.index;e.xp6(1),e.Q6J("isOpen",!0),e.xp6(4),e.hij(" ",n.value.text,""),e.xp6(3),e.Q6J("formGroupName",d),e.xp6(2),e.Q6J("ngClass",e.VKq(16,z,n.get("text").touched&&n.get("text").errors)),e.xp6(1),e.Q6J("ngIf",n.get("text").touched&&n.get("text").errors),e.xp6(2),e.Q6J("ngIf",n.get("AddDescription").value||n.get("description")),e.xp6(1),e.Q6J("ngIf",!n.get("AddDescription").value),e.xp6(5),e.MGl("id","rating",d,""),e.xp6(1),e.MGl("for","rating",d,""),e.xp6(2),e.MGl("id","comment",d,""),e.xp6(1),e.MGl("for","comment",d,""),e.xp6(2),e.MGl("id","select",d,""),e.xp6(1),e.MGl("for","select",d,""),e.xp6(2),e.Q6J("ngIf",1==n.value.type),e.xp6(1),e.Q6J("ngIf",2==n.value.type),e.xp6(1),e.Q6J("ngIf",0!=n.value.type)}}let W=(()=>{class s{constructor(n,d){this.fb=n,this.surveysDataService=d,this.isSubmitted=!1,this.atLeastOne=function(C){return C.length<=1?{atLeastOne:!0}:null}}ngOnInit(){this.questionsForm=this.fb.group({questions:this.fb.array([])}),null!=this.survey&&this.intializeForm()}intializeForm(){for(let n=0;n<this.survey.questions.length;n++)if(this.questions().push(this.newQuestion(this.survey.questions[n])),2==this.survey.questions[n].type){const d=this.fb.array([]);this.questions().controls[n].addControl("options",d);for(let I=0;I<this.survey.questions[n].options.length;I++)this.selectOptions(n).push(this.newOption(this.survey.questions[n].options[I].text))}}questions(){return this.questionsForm.get("questions")}newQuestion(n){return this.fb.group({text:[`${n?.text??""}`,m.kI.required],AddDescription:!1,description:`${n?.description??""}`,type:`${n?.type??"0"}`,isCommentRequired:[n?.isCommentRequired??!1]})}addQuestion(){this.questions().push(this.newQuestion())}removeQuestion(n){this.questions().removeAt(n)}selectOptions(n){return this.questions().at(n).get("options")}newOption(n){return this.fb.group({text:[`${n??""}`,m.kI.required]})}addSelectOption(n){this.selectOptions(n).length<5&&this.selectOptions(n).push(this.newOption())}removeSelectOption(n,d){this.selectOptions(n).removeAt(d)}toggleDescription(n){this.questionsForm.value.questions[n].AddDescription=!0}validateForm(){return this.isSubmitted=!0,this.questionsForm.markAllAsTouched(),console.log(this.questionsForm.valid),this.questionsForm.valid&&this.questions().length}addSelectOptions(n,d){let C=this.questions().controls[d];if(2!=n||this.questions().controls[d].get("options"))C.removeControl("options");else{console.log("options are there1");const I=this.fb.array([],this.atLeastOne);C.addControl("options",I),this.addSelectOption(d),this.addSelectOption(d)}}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(m.qu),e.Y36(F._))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-create-survey-questions"]],inputs:{survey:"survey"},features:[e._Bn([])],decls:6,vars:3,consts:[["action","",1,"w-75",3,"formGroup"],["class","text-danger",4,"ngIf"],["formArrayName","questions"],["class","d-flex mb-10",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-link","mt-20",3,"click"],[1,"text-danger"],[1,"d-flex","mb-10"],[1,"flex-fill",3,"isOpen"],["accordion-heading",""],[1,"d-flex","align-items-center","flex-fill","mb-10","mt-10"],[1,"text-large","font-weight-bold","text-truncate-1"],[1,"ki-arrow-up","ki","ml-8"],[1,"ki-arrow-down","ki","ml-8"],["data-parent","#accordion",1,"collapse","show","mt-10","mb-10",3,"formGroupName"],[1,"form-group"],["type","text","formControlName","text","placeholder","Type the Question Here",1,"form-control","input",3,"ngClass"],["class","text-danger mt-10",4,"ngIf"],["type","text","class","form-control input","formControlName","description","placeholder","Provide a Description",4,"ngIf"],["class","text-secondary cursor-pointer text-accent-violet",3,"click",4,"ngIf"],["for","DateAssigned",1,"text-large","font-weight-bold"],[1,"d-flex","justify-content-between","w-500"],["type","radio","value","1","formControlName","type",3,"id","change"],[3,"for"],["type","radio","value","0","formControlName","type",3,"id","change"],["type","radio","value","2","formControlName","type",3,"id","change"],["class","d-flex justify-content-between  align-items-center w-500",4,"ngIf"],["class","mb-10","formArrayName","options",4,"ngIf"],["class","form-group clear-margin",4,"ngIf"],[1,"ki","ki-delete","ml-10","mt-10","cursor-pointer",3,"click"],[1,"text-danger","mt-10"],["type","text","formControlName","description","placeholder","Provide a Description",1,"form-control","input"],[1,"text-secondary","cursor-pointer","text-accent-violet",3,"click"],[1,"d-flex","justify-content-between","align-items-center","w-500"],["type","text","placeholder","e.g It was bad",1,"form-control","input-sm"],[1,"w-110","border-radius-20","p-4","h-3","bg-accent-green-gradient"],["type","text","placeholder","e.g It was great",1,"form-control","input-sm"],["formArrayName","options",1,"mb-10"],[4,"ngFor","ngForOf"],[1,"text-small","text-accent-violet","mt-10","cursor-pointer",3,"click"],[1,"d-flex","mt-10",3,"formGroupName"],["type","text","formControlName","text",1,"form-control","input-sm","w-250",3,"ngClass"],[1,"ki","ki-close","ml-10","pt-8","cursor-pointer",3,"click"],[1,"form-group","clear-margin"],["type","checkbox","formControlName","isCommentRequired",3,"id"]],template:function(n,d){1&n&&(e.TgZ(0,"form",0),e.YNc(1,V,2,0,"span",1),e.TgZ(2,"accordion",2),e.YNc(3,se,32,18,"div",3),e.qZA()(),e.TgZ(4,"button",4),e.NdJ("click",function(){return d.addQuestion()}),e._uU(5,"Add Question"),e.qZA()),2&n&&(e.Q6J("formGroup",d.questionsForm),e.xp6(1),e.Q6J("ngIf",0==d.questionsForm.value.questions.length&&d.isSubmitted),e.xp6(2),e.Q6J("ngForOf",d.questions().controls))},dependencies:[Z.mk,Z.sg,Z.O5,m._Y,m.Fj,m.Wl,m._,m.JJ,m.JL,m.sg,m.u,m.x0,m.CE,Y.Zf,Y.U_],encapsulation:2}),s})();const H={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let k;const re=new Uint8Array(16);function $(){if(!k&&(k=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!k))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return k(re)}const u=[];for(let s=0;s<256;++s)u.push((s+256).toString(16).slice(1));const E=function M(s,v,n){if(H.randomUUID&&!v&&!s)return H.randomUUID();const d=(s=s||{}).random||(s.rng||$)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,v){n=n||0;for(let C=0;C<16;++C)v[n+C]=d[C];return v}return function b(s,v=0){return(u[s[v+0]]+u[s[v+1]]+u[s[v+2]]+u[s[v+3]]+"-"+u[s[v+4]]+u[s[v+5]]+"-"+u[s[v+6]]+u[s[v+7]]+"-"+u[s[v+8]]+u[s[v+9]]+"-"+u[s[v+10]]+u[s[v+11]]+u[s[v+12]]+u[s[v+13]]+u[s[v+14]]+u[s[v+15]]).toLowerCase()}(d)};var ae=o(1976),ce=o(8370);function p(s,v){if(1&s){const n=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){const I=e.CHM(n).$implicit,J=e.oxw();return e.KtG(J.goto(I.Number))}),e.TgZ(1,"div",11)(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"label",12)(5,"span"),e._uU(6),e.qZA()()()}if(2&s){const n=v.$implicit,d=e.oxw();e.Q6J("ngClass",d.currentStep==n.Number?"active":""),e.xp6(3),e.Oqu(n.Number),e.xp6(3),e.Oqu(n.Title)}}function D(s,v){if(1&s){const n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(n);const C=e.oxw();return e.KtG(C.gotoNext())}),e._uU(1,"Save & Continue"),e.qZA()}}function i(s,v){if(1&s){const n=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(n);const C=e.oxw();return e.KtG(C.goBack())}),e._uU(1,"Back"),e.qZA()}}function l(s,v){if(1&s){const n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(n);const C=e.oxw();return e.KtG(C.launchSurvey())}),e._uU(1),e.qZA()}if(2&s){const n=e.oxw();e.xp6(1),e.Oqu(n.modalButton)}}function _(s,v){if(1&s&&e._UZ(0,"app-create-survey-details",18),2&s){const n=e.oxw(2);e.Q6J("survey",n.survey)("action",n.modalButton)}}function U(s,v){if(1&s&&e._UZ(0,"app-create-survey-questions",19),2&s){const n=e.oxw(2);e.Q6J("survey",n.survey)}}function P(s,v){if(1&s&&(e.TgZ(0,"div",15),e.YNc(1,_,1,2,"app-create-survey-details",16),e.YNc(2,U,1,1,"app-create-survey-questions",17),e.qZA()),2&s){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",1==n.currentStep),e.xp6(1),e.Q6J("ngIf",2==n.currentStep)}}let le=(()=>{class s{constructor(n,d,C,I){this.modalRef=n,this.surveysDataService=d,this.templateService=C,this.authService=I,this.currentStep=1,this.steps=[{Number:1,Title:"Basic Fields"},{Number:2,Title:"Questions In Template"}]}ngOnInit(){null!=this.templateId&&"-1"!=this.templateId&&this.templateService.getTemplateDetailsById(this.templateId).subscribe(n=>{this.template=n,this.survey=this.template,this.survey.canAddTemplate=!1,this.survey.launchSurvey=!0,this.templateService.getTemplateQuestions(this.templateId).subscribe(d=>{console.log(d),this.template.questions=d}),"Launch"==this.modalButton&&(this.survey.expiresOn=void 0)})}goto(n){this.currentStep=n}gotoNext(){if(this.surveyDetails.validateForm()){let n=this.surveyDetails.newSurveyDetails.value;null==this.survey?this.survey={title:n.title,description:n.description,expiresOn:n.expiresOn,questions:[],launchSurvey:!0,canAddTemplate:!0}:(this.survey.title=n.title,this.survey.description=n.description,this.survey.expiresOn=n.expiresOn,console.log(n.expiresOn)),this.currentStep++,console.log(this.survey)}}goBack(){this.currentStep--}launchSurvey(){this.surveyQuestions.validateForm()&&(this.survey.userid=this.authService.getClaims().sub,null==this.templateId||"Launch"==this.modalButton?(this.survey.questions=this.surveyQuestions.questionsForm.value.questions,this.survey.questions.forEach((n,d)=>{n.type=+n.type,n.sequence=d+1,n.options&&n.options.forEach(C=>{const I=E();C.id=I})}),console.log(this.survey,"Launched New Survey"),"Create Template"==this.modalButton&&(this.survey.canAddTemplate=!0,this.survey.launchSurvey=!1),this.surveysDataService.AddNewSurvey(this.survey).subscribe(n=>{this.modalRef.hide(),this.surveysDataService.fetchActiveSurveys().subscribe(d=>{this.surveysDataService.updateActiveSubject(d)})})):(this.template.userid=this.survey.userid,this.template.title=this.survey.title,this.template.description=this.survey.description,this.template.questions=this.surveyQuestions.questionsForm.value.questions,this.template.questions.forEach((n,d)=>{n.type=+n.type,n.sequence=d,n.options&&n.options.forEach(C=>{if(!C.id){const I=E();C.id=I}})}),console.log(this.template,"Updated Template"),this.templateService.updateTemplate(this.templateId,this.template).subscribe(n=>{this.templateService.fetchTemplates().subscribe(d=>{this.templateService.updateTemplatesSubject(d),this.modalRef.hide()})})))}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(h.UZ),e.Y36(F._),e.Y36(ae.e),e.Y36(ce.e))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-stepper-wizard"]],viewQuery:function(n,d){if(1&n&&(e.Gf(R,5),e.Gf(W,5)),2&n){let C;e.iGM(C=e.CRH())&&(d.surveyDetails=C.first),e.iGM(C=e.CRH())&&(d.surveyQuestions=C.first)}},decls:12,vars:6,consts:[[1,"modal-header"],[1,"modal-title"],[1,"ki","ki-close",3,"click"],[1,"modal-sub-header"],[1,"stepper-wizard","d-flex","justify-content-center","w-100"],["class","step",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-primary mx-10 ","disabled","",3,"click",4,"ngIf"],["class","modal-body",4,"ngIf"],[1,"step",3,"ngClass","click"],[1,"step-number"],[1,"step-label","w-150"],[1,"btn","btn-primary",3,"click"],["disabled","",1,"btn","btn-primary","mx-10",3,"click"],[1,"modal-body"],[3,"survey","action",4,"ngIf"],[3,"survey",4,"ngIf"],[3,"survey","action"],[3,"survey"]],template:function(n,d){1&n&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2),e.qZA(),e.TgZ(3,"span",2),e.NdJ("click",function(){return d.modalRef.hide()}),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4),e.YNc(6,p,7,3,"div",5),e.qZA(),e.TgZ(7,"div",6),e.YNc(8,D,2,0,"button",7),e.YNc(9,i,2,0,"button",8),e.YNc(10,l,2,1,"button",7),e.qZA()(),e.YNc(11,P,3,2,"div",9)),2&n&&(e.xp6(2),e.Oqu(d.modaltitle),e.xp6(4),e.Q6J("ngForOf",d.steps),e.xp6(2),e.Q6J("ngIf",1==d.currentStep),e.xp6(1),e.Q6J("ngIf",d.currentStep==d.steps.length),e.xp6(1),e.Q6J("ngIf",d.currentStep==d.steps.length),e.xp6(1),e.Q6J("ngIf","-1"==d.templateId||null==d.templateId||null!=d.templateId&&null!=d.survey))},dependencies:[Z.mk,Z.sg,Z.O5,R,W],encapsulation:2}),s})();var me=o(8386);function ge(s,v){1&s&&(e.TgZ(0,"span",18),e._uU(1,"*Required"),e.qZA())}function _e(s,v){1&s&&(e.TgZ(0,"span",18),e._uU(1,"*Required"),e.qZA())}function ve(s,v){1&s&&(e.TgZ(0,"span",18),e._uU(1,"*Required"),e.qZA())}const de=function(s){return{"is-invalid":s}};function he(s,v){if(1&s&&(e.TgZ(0,"form",9)(1,"div",10)(2,"label",11),e._uU(3,"Title of this survey"),e.qZA(),e._UZ(4,"input",12),e.YNc(5,ge,2,0,"span",13),e.qZA(),e.TgZ(6,"div",10)(7,"label",11),e._uU(8,"Description"),e.qZA(),e._UZ(9,"input",14),e.YNc(10,_e,2,0,"span",13),e.qZA(),e.TgZ(11,"div",10)(12,"label",15),e._uU(13,"The survey expires on"),e.qZA(),e.TgZ(14,"div",16),e._UZ(15,"input",17),e.qZA(),e.YNc(16,ve,2,0,"span",13),e.qZA()()),2&s){const n=e.oxw();e.Q6J("formGroup",n.updateSurveyForm),e.xp6(4),e.Q6J("ngClass",e.VKq(7,de,n.updateSurveyForm.get("title").touched&&n.updateSurveyForm.get("title").errors)),e.xp6(1),e.Q6J("ngIf",n.updateSurveyForm.get("title").touched&&n.updateSurveyForm.get("title").errors),e.xp6(4),e.Q6J("ngClass",e.VKq(9,de,n.updateSurveyForm.get("description").touched&&n.updateSurveyForm.get("description").errors)),e.xp6(1),e.Q6J("ngIf",n.updateSurveyForm.get("description").touched&&n.updateSurveyForm.get("description").errors),e.xp6(5),e.Q6J("ngClass",e.VKq(11,de,n.updateSurveyForm.get("expiresOn").touched&&n.updateSurveyForm.get("expiresOn").errors)),e.xp6(1),e.Q6J("ngIf",n.updateSurveyForm.get("expiresOn").touched&&n.updateSurveyForm.get("expiresOn").errors)}}let pe=(()=>{class s{constructor(n,d,C,I){this.modalRef=n,this.surveyDataService=d,this.datepipe=C,this.userService=I,this.currentDate=new Date}ngOnInit(){this.surveyDataService.getSurveyDetailById(this.selectedSurveyId).subscribe(n=>{this.selectedSurvey=n,this.initializeForm(this.selectedSurvey)})}initializeForm(n){this.updateSurveyForm=new m.cw({title:new m.NI(`${n?.title??""}`,[m.kI.required]),description:new m.NI(`${n?.description??""}`,[m.kI.required]),expiresOn:new m.NI(this.datepipe.transform(new Date(this.selectedSurvey.expiresOn),"yyyy-MM-dd"),[m.kI.required])})}updateSurvey(){if(this.updateSurveyForm.valid){let n=this.selectedSurvey;n.title=this.updateSurveyForm.value.title,n.description=this.updateSurveyForm.value.description,n.expiresOn=this.updateSurveyForm.value.expiresOn,"Relaunch"==this.modalButton?this.surveyDataService.relaunchSurvey(this.selectedSurveyId,n).subscribe(()=>{this.surveyDataService.fetchClosedSurveys().subscribe(d=>{this.surveyDataService.updateClosedSubject(d),this.modalRef.hide()})}):this.surveyDataService.updateSurveyDetails(this.selectedSurveyId,n).subscribe(()=>{this.surveyDataService.fetchActiveSurveys().subscribe(d=>{this.surveyDataService.updateActiveSubject(d),this.modalRef.hide()})})}}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(h.UZ),e.Y36(F._),e.Y36(Z.uU),e.Y36(me.K))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-update-survey-details"]],features:[e._Bn([Z.uU])],decls:13,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],[1,"ki","ki-close",3,"click"],[1,"modal-body"],[1,"my-10","text-hint"],["action","",3,"formGroup",4,"ngIf"],[1,"modal-footer","p-20"],[1,"btn","btn-secondary","border-color-accent-violet",3,"click"],[1,"btn","btn-primary","bg-accent-violet",3,"click"],["action","",3,"formGroup"],[1,"form-group"],[1,"text-secondary"],["type","text","formControlName","title",1,"form-control","input-sm",3,"ngClass"],["class","text-danger",4,"ngIf"],["type","text","formControlName","description",1,"form-control","input",3,"ngClass"],["for","DateAssigned "],[1,"input-calendar","col-sm-4","clear-padding-x"],["type","date","formControlName","expiresOn","id","DateAssigned",1,"form-control",3,"ngClass"],[1,"text-danger"]],template:function(n,d){1&n&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2),e.qZA(),e.TgZ(3,"span",2),e.NdJ("click",function(){return d.modalRef.hide()}),e.qZA()(),e.TgZ(4,"div",3)(5,"p",4),e._uU(6,"Note: You can't update the questions here."),e.qZA(),e.YNc(7,he,17,13,"form",5),e.qZA(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return d.modalRef.hide()}),e._uU(10,"Cancel"),e.qZA(),e.TgZ(11,"button",8),e.NdJ("click",function(){return d.updateSurvey()}),e._uU(12),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(d.modaltitle),e.xp6(5),e.Q6J("ngIf",void 0!==d.updateSurveyForm),e.xp6(5),e.Oqu(d.modalButton))},dependencies:[Z.mk,Z.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u],encapsulation:2}),s})()},2270:(Q,w,o)=>{o.d(w,{wo:()=>ne,rB:()=>g,fR:()=>L,mx:()=>$});var t=o(1571),e=o(9547),h=o(6895);function O(u,b){1&u&&(t.TgZ(0,"p"),t._uU(1,"Public"),t.qZA())}function Z(u,b){1&u&&(t.TgZ(0,"p"),t._uU(1,"Anonymous"),t.qZA())}function q(u,b){if(1&u&&(t.TgZ(0,"div")(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"p",2),t._uU(4),t.qZA(),t.TgZ(5,"h6",3),t._uU(6,"Other Details"),t.qZA(),t.TgZ(7,"div",4)(8,"div",5)(9,"label",6),t._uU(10,"Expires on"),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.ALo(13,"date"),t.qZA()(),t.TgZ(14,"div",5)(15,"label",6),t._uU(16,"Questions"),t.qZA(),t.TgZ(17,"p"),t._uU(18),t.qZA()(),t.TgZ(19,"div",5)(20,"label",6),t._uU(21,"survey type"),t.qZA(),t.YNc(22,O,2,0,"p",0),t.YNc(23,Z,2,0,"p",0),t.qZA()()()),2&u){const r=t.oxw();t.xp6(2),t.Oqu(r.survey.title),t.xp6(2),t.Oqu(r.survey.description),t.xp6(8),t.Oqu(t.xi3(13,6,r.survey.expiresOn,"MMM dd,yyyy")),t.xp6(6),t.Oqu(r.survey.questionsCount),t.xp6(4),t.Q6J("ngIf",1==r.survey.type),t.xp6(1),t.Q6J("ngIf",0==r.survey.type)}}let g=(()=>{class u{constructor(r){this.surveysService=r}ngOnInit(){this.surveysService.getSurveyDetailById(this.surveyId).subscribe(r=>{this.survey=r})}}return u.\u0275fac=function(r){return new(r||u)(t.Y36(e._))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-survey-details"]],inputs:{surveyId:"surveyId"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"mb-10"],[1,"text-normal","w-700"],[1,"mt-20","mb-10"],[1,"data-bar","single-line-bar"],[1,"data-block"],[1,"data-label"]],template:function(r,y){1&r&&t.YNc(0,q,24,9,"div",0),2&r&&t.Q6J("ngIf",null!=y.survey)},dependencies:[h.O5,h.uU],encapsulation:2}),u})();var T=o(433),S=o(8386),m=o(388),A=o(4757),c=o(4349);function f(u,b){1&u&&(t.TgZ(0,"span"),t._uU(1,"Text"),t.qZA())}function a(u,b){1&u&&(t.TgZ(0,"span"),t._uU(1,"Rating"),t.qZA())}function x(u,b){1&u&&(t.TgZ(0,"span"),t._uU(1,"Select From List"),t.qZA())}function N(u,b){1&u&&(t.TgZ(0,"span",12),t._uU(1,"*Required"),t.qZA())}const R=function(u){return[u]},F=function(u){return{"is-invalid":u}};function Y(u,b){if(1&u&&(t.TgZ(0,"div"),t._UZ(1,"input",10),t.YNc(2,N,2,0,"span",11),t.qZA()),2&u){const r=t.oxw().$implicit,y=t.oxw(2);t.xp6(1),t.Q6J("formControlName",r.text)("ngClass",t.VKq(8,F,y.questionsForm.get(t.VKq(4,R,r.text)).touched&&y.questionsForm.get(t.VKq(6,R,r.text)).errors))("placeholder",r.description),t.xp6(1),t.Q6J("ngIf",y.questionsForm.get(t.VKq(10,R,r.text)).touched&&y.questionsForm.get(t.VKq(12,R,r.text)).errors)}}function V(u,b){1&u&&(t.TgZ(0,"span",15),t._uU(1,"*Required"),t.qZA())}function j(u,b){if(1&u&&(t.TgZ(0,"div"),t._UZ(1,"ng-select",13),t.YNc(2,V,2,0,"span",14),t.qZA()),2&u){const r=t.oxw().$implicit,y=t.oxw(2);t.xp6(1),t.Q6J("items",r.options)("placeholder","Select")("formControlName",r.text)("ngClass",t.VKq(9,F,y.questionsForm.get(t.VKq(5,R,r.text)).touched&&y.questionsForm.get(t.VKq(7,R,r.text)).errors)),t.xp6(1),t.Q6J("ngIf",y.questionsForm.get(t.VKq(11,R,r.text)).touched&&y.questionsForm.get(t.VKq(13,R,r.text)).errors)}}function K(u,b){1&u&&t._uU(0),2&u&&t.Oqu(b.index<b.value?"\u26ab":"\u26aa")}function G(u,b){1&u&&(t.TgZ(0,"span",12),t._uU(1,"*Required"),t.qZA())}function X(u,b){if(1&u&&(t.TgZ(0,"div"),t._UZ(1,"rating",16),t.YNc(2,K,1,1,"ng-template",null,17,t.W1O),t.YNc(4,G,2,0,"span",11),t.qZA()),2&u){const r=t.MAs(3),y=t.oxw().$implicit,M=t.oxw(2);t.xp6(1),t.Q6J("max",10)("formControlName",y.text)("ngClass",t.VKq(9,F,M.questionsForm.get(t.VKq(5,R,y.text)).touched&&M.questionsForm.get(t.VKq(7,R,y.text)).errors))("customTemplate",r),t.xp6(3),t.Q6J("ngIf",M.questionsForm.get(t.VKq(11,R,y.text)).touched&&M.questionsForm.get(t.VKq(13,R,y.text)).errors)}}function ee(u,b){if(1&u&&t._UZ(0,"input",18),2&u){const r=t.oxw().$implicit;t.Q6J("formControlName",r.text+"comment")}}function te(u,b){if(1&u&&(t.TgZ(0,"div",3)(1,"div",4)(2,"label",5),t._uU(3),t.qZA(),t.TgZ(4,"p",6),t._uU(5,"Response type: "),t.YNc(6,f,2,0,"span",7),t.YNc(7,a,2,0,"span",7),t.YNc(8,x,2,0,"span",7),t.qZA(),t.TgZ(9,"div",8),t.YNc(10,Y,3,14,"div",7),t.YNc(11,j,3,15,"div",7),t.YNc(12,X,5,15,"div",7),t.YNc(13,ee,1,1,"input",9),t.qZA()()()),2&u){const r=b.$implicit,y=t.oxw(2);t.xp6(1),t.Q6J("formGroup",y.questionsForm),t.xp6(2),t.AsE("",r.sequence,". ",r.text,""),t.xp6(3),t.Q6J("ngIf",0==r.type),t.xp6(1),t.Q6J("ngIf",1==r.type),t.xp6(1),t.Q6J("ngIf",2==r.type),t.xp6(2),t.Q6J("ngIf",0==r.type),t.xp6(1),t.Q6J("ngIf",2==r.type),t.xp6(1),t.Q6J("ngIf",1==r.type),t.xp6(1),t.Q6J("ngIf",r.isCommentRequired&&0!=r.type)}}function z(u,b){if(1&u&&(t.TgZ(0,"form",1),t.YNc(1,te,14,10,"div",2),t.qZA()),2&u){const r=t.oxw();t.Q6J("formGroup",r.questionsForm),t.xp6(1),t.Q6J("ngForOf",r.questions)}}let L=(()=>{class u{constructor(r,y,M,E){this.userService=r,this.surveyService=y,this.fb=M,this.modalRef=E,this.responses=[]}ngOnInit(){this.surveyService.getSurveyQuestions(this.surveyId).subscribe(r=>{this.questions=r,this.questionsForm=this.toFormGroup(this.questions)})}toFormGroup(r){const y={};return r.forEach(M=>{y[M.text]=new T.NI(null,T.kI.required),M.isCommentRequired&&(y[M.text+"comment"]=new T.NI(""))}),new T.cw(y)}validateForm(){return this.questionsForm.markAllAsTouched(),this.questionsForm.valid}submit(){this.questions.forEach(r=>{let y={surveyId:this.surveyId,questionId:r.id,questionType:r.type,isCommentRequired:r.isCommentRequired};1==r.type?y.rating=this.questionsForm.value[r.text]:0==r.type?y.comment=this.questionsForm.value[r.text]:y.selectedAnswer=[this.questionsForm.value[r.text]],r.isCommentRequired&&(y.comment=this.questionsForm.value[r.text+"comment"]),this.responses.push(y)}),this.userService.submitSurvey(this.responses).subscribe(()=>{this.userService.fetchOpenSurveys().subscribe(r=>{this.userService.updateSubject(r)})}),this.modalRef.hide()}}return u.\u0275fac=function(r){return new(r||u)(t.Y36(S.K),t.Y36(e._),t.Y36(T.qu),t.Y36(m.UZ))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-survey-questions"]],inputs:{surveyId:"surveyId"},decls:1,vars:1,consts:[["action","",3,"formGroup",4,"ngIf"],["action","",3,"formGroup"],["class","d-flex mb-10",4,"ngFor","ngForOf"],[1,"d-flex","mb-10"],[1,"form-group","w-75",3,"formGroup"],["for","question.id",1,"h5","font-weight-semi-bold"],[1,"text-secondary","mb-10"],[4,"ngIf"],[1,"bg-secondary","p-20","w-75"],["id","question.id","type","text","class","form-control  input-sm border-0 border-radius-none  border-bottom mt-10 w-75","placeholder","Add A comment",3,"formControlName",4,"ngIf"],["id","question.id","type","text",1,"form-control","input","bg-white","border-accent-violet","h-60",3,"formControlName","ngClass","placeholder"],["class","text-danger pt-4 pl-4",4,"ngIf"],[1,"text-danger","pt-4","pl-4"],["bindValue","id","bindLabel","text","required","",1,"w-50","bg-white",3,"items","placeholder","formControlName","ngClass"],["class","text-danger pt-8 pl-4",4,"ngIf"],[1,"text-danger","pt-8","pl-4"],[2,"color","#0275d8",3,"max","formControlName","ngClass","customTemplate"],["rating",""],["id","question.id","type","text","placeholder","Add A comment",1,"form-control","input-sm","border-0","border-radius-none","border-bottom","mt-10","w-75",3,"formControlName"]],template:function(r,y){1&r&&t.YNc(0,z,2,2,"form",0),2&r&&t.Q6J("ngIf",null!=y.questionsForm)},dependencies:[h.mk,h.sg,h.O5,T._Y,T.Fj,T.JJ,T.JL,T.Q7,T.sg,T.u,A.AT,c.w9],encapsulation:2}),u})(),ne=(()=>{class u{constructor(r,y){this.modalRef=r,this.modalService=y}agInit(r){this.params=r}refresh(r){return this.params=r,!1}takeSurvey(){this.modalRef=this.modalService.show($,{class:"full-modal",initialState:{modaltitle:"Update Template",modalButton:"Submit",templateId:this.params.data.id}})}}return u.\u0275fac=function(r){return new(r||u)(t.Y36(m.UZ),t.Y36(m.tT))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-actions-grid-child"]],decls:2,vars:0,consts:[[1,"text-accent-violet",3,"click"]],template:function(r,y){1&r&&(t.TgZ(0,"a",0),t.NdJ("click",function(){return y.takeSurvey()}),t._uU(1,"Take Survey"),t.qZA())},encapsulation:2}),u})();var ie=o(1789);function oe(u,b){if(1&u){const r=t.EpF();t.TgZ(0,"div",11),t.NdJ("click",function(){const E=t.CHM(r).$implicit,ae=t.oxw();return t.KtG(ae.goto(E.Number))}),t.TgZ(1,"div",12)(2,"span"),t._uU(3),t.qZA()(),t.TgZ(4,"label",13)(5,"span"),t._uU(6),t.qZA()()()}if(2&u){const r=b.$implicit,y=t.oxw();t.Q6J("ngClass",y.currentStep==r.Number?"active":""),t.xp6(3),t.Oqu(r.Number),t.xp6(3),t.Oqu(r.Title)}}function se(u,b){if(1&u){const r=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(r);const M=t.oxw();return t.KtG(M.gotoNext())}),t._uU(1,"Continue"),t.qZA()}}function W(u,b){if(1&u){const r=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(r);const M=t.oxw();return t.KtG(M.goBack())}),t._uU(1,"Back"),t.qZA()}}function ue(u,b){if(1&u){const r=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(r);const M=t.oxw();return t.KtG(M.launchSurvey())}),t._uU(1),t.qZA()}if(2&u){const r=t.oxw();t.xp6(1),t.Oqu(r.modalButton)}}function H(u,b){if(1&u&&t._UZ(0,"app-survey-details",18),2&u){const r=t.oxw(2);t.Q6J("surveyId",r.templateId)}}function k(u,b){if(1&u&&t._UZ(0,"app-survey-questions",18),2&u){const r=t.oxw(2);t.Q6J("surveyId",r.templateId)}}function re(u,b){if(1&u&&(t.TgZ(0,"div",16),t.YNc(1,H,1,1,"app-survey-details",17),t.YNc(2,k,1,1,"app-survey-questions",17),t.qZA()),2&u){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",1==r.currentStep),t.xp6(1),t.Q6J("ngIf",2==r.currentStep)}}let $=(()=>{class u{constructor(r,y,M){this.modalRef=r,this.modalService=y,this.surveysDataService=M,this.currentStep=1,this.steps=[{Number:1,Title:"Basic Fields"},{Number:2,Title:"Questions In Survey"}]}ngOnInit(){null!=this.templateId&&this.surveysDataService.getSurveyDetailById(this.templateId).subscribe(r=>{this.survey=r})}goto(r){this.currentStep=r}gotoNext(){this.currentStep++}goBack(){this.currentStep--}launchSurvey(){this.surveyQuestions.validateForm()&&(this.modalRef=this.modalService.show(ie.Sv,{class:"modal-dialog-centered",initialState:{action:"Submit Survey"}}),this.modalRef.content.event.subscribe(r=>{r.isSubmit&&this.surveyQuestions.submit()}))}}return u.\u0275fac=function(r){return new(r||u)(t.Y36(m.UZ),t.Y36(m.tT),t.Y36(e._))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-take-survey-stepper-wizard"]],viewQuery:function(r,y){if(1&r&&(t.Gf(g,5),t.Gf(L,5)),2&r){let M;t.iGM(M=t.CRH())&&(y.surveyDetails=M.first),t.iGM(M=t.CRH())&&(y.surveyQuestions=M.first)}},decls:13,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],[1,"ki","ki-close",3,"click"],[1,"modal-sub-header"],[1,"stepper-wizard","d-flex","justify-content-center","w-100"],["class","step",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-primary mx-10 ","disabled","",3,"click",4,"ngIf"],[1,"page-container"],["class","modal-body",4,"ngIf"],[1,"step",3,"ngClass","click"],[1,"step-number"],[1,"step-label","w-150"],[1,"btn","btn-primary",3,"click"],["disabled","",1,"btn","btn-primary","mx-10",3,"click"],[1,"modal-body"],[3,"surveyId",4,"ngIf"],[3,"surveyId"]],template:function(r,y){1&r&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2,"Take Survey"),t.qZA(),t.TgZ(3,"span",2),t.NdJ("click",function(){return y.modalRef.hide()}),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4),t.YNc(6,oe,7,3,"div",5),t.qZA(),t.TgZ(7,"div",6),t.YNc(8,se,2,0,"button",7),t.YNc(9,W,2,0,"button",8),t.YNc(10,ue,2,1,"button",7),t.qZA()(),t.TgZ(11,"div",9),t.YNc(12,re,3,2,"div",10),t.qZA()),2&r&&(t.xp6(6),t.Q6J("ngForOf",y.steps),t.xp6(2),t.Q6J("ngIf",1==y.currentStep),t.xp6(1),t.Q6J("ngIf",y.currentStep==y.steps.length),t.xp6(1),t.Q6J("ngIf",y.currentStep==y.steps.length),t.xp6(2),t.Q6J("ngIf",y.survey))},dependencies:[h.mk,h.sg,h.O5,g,L],encapsulation:2}),u})()},4025:(Q,w,o)=>{o.d(w,{Q:()=>Z});var t=o(878),e=o(3700),h=o(1571);const O=[{path:"",component:e.T}];let Z=(()=>{class q{}return q.\u0275fac=function(T){return new(T||q)},q.\u0275mod=h.oAB({type:q}),q.\u0275inj=h.cJS({imports:[t.Bz.forChild(O),t.Bz]}),q})()},4050:(Q,w,o)=>{o.r(w),o.d(w,{OpenSurveysModule:()=>T});var t=o(6895),e=o(3172),h=o(433),O=o(4757),Z=o(4349),q=o(4025),g=o(1571);let T=(()=>{class S{}return S.\u0275fac=function(A){return new(A||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[t.ez,q.Q,e.sF,h.u5,h.UX,O.Xt.forRoot(),Z.A0]}),S})()},3700:(Q,w,o)=>{o.d(w,{T:()=>g});var t=o(2270),e=o(1571),h=o(8386),O=o(9547),Z=o(388),q=o(3172);let g=(()=>{class T{constructor(m,A,c){this.userService=m,this.surveysDataService=A,this.modalService=c,this.rowData=[],this.gridOptions={columnDefs:[{headerName:"Survey Title",field:"surveyTitle",width:500,cellRenderer:function(f){return f.data.title+'<br/><p class="text-secondary text-small pt-4">'+f.data.description+".</p>"}},{headerName:"Expires On",field:"expiresOn",cellRenderer:function(f){let a=new Date(f.data.expiresOn),N=Math.ceil(Math.abs((new Date).getTime()-a.getTime())/864e5);return N>=5?a.toDateString()+'<br><p class="text-secondary text-small" *ngIf="daysLeft=5" > Expires in '+N+" days. </p>":a.toDateString()+'<br><p class="text-danger text-small" *ngIf="daysLeft=5" > Expires in '+N+" days. </p>"}},{headerName:"Launched On",field:"launchedOn",cellRenderer:function(f){return new Date(f.data.launchedOn).toDateString()+'<br><p class="text-muted text-small pt-4">by '+f.data.launchedBy+"</p>"}},{headerName:"Actions",field:"actions",width:100,cellRenderer:t.wo,cellRendererParams:{action:"Take Survey"}}],rowData:[],headerHeight:40,rowHeight:55}}ngOnInit(){this.userService.fetchOpenSurveys().subscribe(m=>{this.userService.updateSubject(m),this.userService.getOpenSurveys().subscribe(A=>{this.rowData=A,this.gridOptions.api?.setRowData(this.rowData)})})}gridReady(){this.gridOptions.api?.sizeColumnsToFit()}takeSurvey(m){console.log(m,"Hello")}}return T.\u0275fac=function(m){return new(m||T)(e.Y36(h.K),e.Y36(O._),e.Y36(Z.tT))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-open-surveys"]],decls:8,vars:2,consts:[[1,"d-flex","justify-content-between","align-items-end"],[1,"text-secondary","text-large"],[1,"card","clear-margin-x","border-0"],["domLayout","autoHeight",1,"ag-theme-material","h-100","w-100",3,"gridOptions","paginationPageSize","gridReady"]],template:function(m,A){1&m&&(e.TgZ(0,"div",0)(1,"div")(2,"h2"),e._uU(3,"Open Pulse Surveys"),e.qZA(),e.TgZ(4,"p",1),e._uU(5,"Here you can see the active pulse surveys that are yet to submit."),e.qZA()()(),e.TgZ(6,"div",2)(7,"ag-grid-angular",3),e.NdJ("gridReady",function(){return A.gridReady()}),e.qZA()()),2&m&&(e.xp6(7),e.Q6J("gridOptions",A.gridOptions)("paginationPageSize",10))},dependencies:[q.N8],encapsulation:2}),T})()},5446:(Q,w,o)=>{o.d(w,{S:()=>S});var t=o(1571),e=o(388),h=o(9547),O=o(1976),Z=o(6895);function q(m,A){1&m&&(t.TgZ(0,"p"),t._uU(1,"Are You Sure, You want to Delete this Template ?"),t.qZA())}function g(m,A){1&m&&(t.TgZ(0,"p"),t._uU(1,"Are You Sure You want to close this survey before it Expires ? "),t.qZA())}function T(m,A){1&m&&(t.TgZ(0,"p"),t._uU(1,"Are you sure, you want to Submit ? "),t.qZA())}let S=(()=>{class m{constructor(c,f,a){this.modalRef=c,this.surveyDataService=f,this.templateService=a,this.event=new t.vpe}ngOnInit(){}closeSurvey(){"delete"===this.action?this.templateService.deleteTemplate(this.selectedSurveyId).subscribe(()=>this.templateService.fetchTemplates().subscribe(c=>{this.templateService.updateTemplatesSubject(c)})):"Submit Survey"===this.action?this.event.emit({isSubmit:!0}):this.surveyDataService.closeSurvey(this.selectedSurveyId).subscribe(()=>{this.surveyDataService.fetchActiveSurveys().subscribe(c=>{this.surveyDataService.updateActiveSubject(c)})}),this.modalRef.hide()}}return m.\u0275fac=function(c){return new(c||m)(t.Y36(e.UZ),t.Y36(h._),t.Y36(O.e))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-confirmation"]],decls:13,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],[1,"ki","ki-close",3,"click"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer","p-20"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(c,f){1&c&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2,"Confirmation"),t.qZA(),t.TgZ(3,"span",2),t.NdJ("click",function(){return f.modalRef.hide()}),t.qZA()(),t.TgZ(4,"div",3),t.YNc(5,q,2,0,"p",4),t.YNc(6,g,2,0,"p",4),t.YNc(7,T,2,0,"p",4),t.qZA(),t.TgZ(8,"div",5)(9,"button",6),t.NdJ("click",function(){return f.modalRef.hide()}),t._uU(10,"No"),t.qZA(),t.TgZ(11,"button",7),t.NdJ("click",function(){return f.closeSurvey()}),t._uU(12,"Yes"),t.qZA()()),2&c&&(t.xp6(5),t.Q6J("ngIf","delete"==f.action),t.xp6(1),t.Q6J("ngIf","close"==f.action),t.xp6(1),t.Q6J("ngIf","Submit Survey"==f.action))},dependencies:[Z.O5],encapsulation:2}),m})()},4175:(Q,w,o)=>{o.d(w,{HC:()=>A,O1:()=>m});var t=o(1571),e=o(6895);const h=["*"];function O(c,f){1&c&&t.GkF(0)}function Z(c,f){if(1&c&&(t.TgZ(0,"bar",3),t.Hsn(1),t.qZA()),2&c){const a=t.oxw();t.Q6J("type",a.type)("value",a._value)("max",a.max)("animate",a.animate)("striped",a.striped)}}function q(c,f){if(1&c&&(t.TgZ(0,"bar",3),t._uU(1),t.qZA()),2&c){const a=f.$implicit,x=t.oxw(2);t.Q6J("type",a.type)("value",a.value)("max",a.max||x.max)("animate",x.animate)("striped",x.striped),t.xp6(1),t.Oqu(a.label)}}function g(c,f){if(1&c&&t.YNc(0,q,2,6,"bar",4),2&c){const a=t.oxw();t.Q6J("ngForOf",a._values)}}let T=(()=>{class c{constructor(a,x){this.el=a,this.renderer=x,this.max=100,this.value=0,this.animate=!1,this.striped=!1,this.type="info",this.percent=100}ngOnChanges(a){(a.value||a.max)&&(this.percent=Number(a.value?.currentValue||this.value)/Number(a.max?.currentValue||this.max||100)*100),a.type&&this.applyTypeClasses()}applyTypeClasses(){if(this._prevType){const x=`bg-${this._prevType}`;this.renderer.removeClass(this.el.nativeElement,`progress-bar-${this._prevType}`),this.renderer.removeClass(this.el.nativeElement,x),this._prevType=void 0}if(this.type){const x=`bg-${this.type}`;this.renderer.addClass(this.el.nativeElement,`progress-bar-${this.type}`),this.renderer.addClass(this.el.nativeElement,x),this._prevType=this.type}}}return c.\u0275fac=function(a){return new(a||c)(t.Y36(t.SBq),t.Y36(t.Qsj))},c.\u0275cmp=t.Xpm({type:c,selectors:[["bar"]],hostAttrs:["role","progressbar","aria-valuemin","0"],hostVars:13,hostBindings:function(a,x){2&a&&(t.uIk("aria-valuenow",x.value)("aria-valuetext",x.percent?x.percent.toFixed(0)+"%":"")("aria-valuemax",x.max),t.Udp("height","100","%")("width",x.percent,"%"),t.ekj("progress-bar",!0)("progress-bar-animated",x.animate)("progress-bar-striped",x.striped))},inputs:{max:"max",value:"value",animate:"animate",striped:"striped",type:"type"},features:[t.TTD],ngContentSelectors:h,decls:1,vars:0,template:function(a,x){1&a&&(t.F$t(),t.Hsn(0))},encapsulation:2,changeDetection:0}),c})(),S=(()=>{class c{constructor(){this.animate=!1,this.max=100}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),m=(()=>{class c{constructor(a){this.max=100,this.animate=!1,this.striped=!1,this.isStacked=!1,this._value=0,Object.assign(this,a)}set value(a){this.isStacked=Array.isArray(a),"number"==typeof a?(this._value=a,this._values=void 0):(this._value=void 0,this._values=a)}}return c.\u0275fac=function(a){return new(a||c)(t.Y36(S))},c.\u0275cmp=t.Xpm({type:c,selectors:[["progressbar"]],hostVars:3,hostBindings:function(a,x){2&a&&(t.uIk("max",x.max),t.ekj("progress",!0))},inputs:{max:"max",animate:"animate",striped:"striped",type:"type",value:"value"},ngContentSelectors:h,decls:5,vars:3,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["NotStacked",""],["Stacked",""],[3,"type","value","max","animate","striped"],[3,"type","value","max","animate","striped",4,"ngFor","ngForOf"]],template:function(a,x){if(1&a&&(t.F$t(),t.YNc(0,O,1,0,"ng-container",0),t.YNc(1,Z,2,5,"ng-template",null,1,t.W1O),t.YNc(3,g,1,1,"ng-template",null,2,t.W1O)),2&a){const N=t.MAs(2),R=t.MAs(4);t.Q6J("ngIf",!x.isStacked)("ngIfThen",N)("ngIfElse",R)}},dependencies:[e.sg,e.O5,T],styles:["[_nghost-%COMP%]{width:100%;display:flex}"],changeDetection:0}),c})(),A=(()=>{class c{static forRoot(){return{ngModule:c,providers:[]}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[e.ez]}),c})()},4757:(Q,w,o)=>{o.d(w,{AT:()=>m,Xt:()=>A});var t=o(1571),e=o(433),h=o(6895);function O(c,f){1&c&&t._uU(0),2&c&&t.Oqu(f.index<f.value?"\u2605":"\u2606")}function Z(c,f){}const q=function(c,f){return{index:c,value:f}};function g(c,f){if(1&c){const a=t.EpF();t.TgZ(0,"span",3),t._uU(1),t.qZA(),t.TgZ(2,"span",4),t.NdJ("mouseenter",function(){const R=t.CHM(a).index,F=t.oxw();return t.KtG(F.enter(R+1))})("click",function(){const R=t.CHM(a).index,F=t.oxw();return t.KtG(F.rate(R+1))}),t.YNc(3,Z,0,0,"ng-template",5),t.qZA()}if(2&c){const a=f.$implicit,x=f.index,N=t.oxw(),R=t.MAs(2);t.xp6(1),t.hij("(",x<N.value?"*":" ",")"),t.xp6(1),t.Udp("cursor",N.readonly?"default":"pointer"),t.ekj("active",x<N.value),t.Q6J("title",a.title),t.xp6(1),t.Q6J("ngTemplateOutlet",N.customTemplate||R)("ngTemplateOutletContext",t.WLB(8,q,x,N.value))}}let T=(()=>{class c{constructor(){this.ariaLabel="rating"}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const S={provide:e.JU,useExisting:(0,t.Gpc)(()=>m),multi:!0};let m=(()=>{class c{constructor(a,x){this.changeDetection=a,this.max=5,this.readonly=!1,this.titles=[],this.onHover=new t.vpe,this.onLeave=new t.vpe,this.onChange=Function.prototype,this.onTouched=Function.prototype,this.ariaLabel="rating",this.range=[],this.value=0,Object.assign(this,x)}onKeydown(a){-1!==[37,38,39,40].indexOf(a.which)&&(a.preventDefault(),a.stopPropagation(),this.rate(this.value+(38===a.which||39===a.which?1:-1)))}ngOnInit(){this.max=this.max||5,this.titles=typeof this.titles<"u"&&this.titles.length>0?this.titles:[],this.range=this.buildTemplateObjects(this.max)}writeValue(a){if(a%1!==a)return this.value=Math.round(a),this.preValue=a,void this.changeDetection.markForCheck();this.preValue=a,this.value=a,this.changeDetection.markForCheck()}enter(a){this.readonly||(this.value=a,this.changeDetection.markForCheck(),this.onHover.emit(a))}reset(){"number"==typeof this.preValue&&(this.value=Math.round(this.preValue),this.changeDetection.markForCheck(),this.onLeave.emit(this.value))}registerOnChange(a){this.onChange=a}registerOnTouched(a){this.onTouched=a}rate(a){!this.readonly&&this.range&&a>=0&&a<=this.range.length&&(this.writeValue(a),this.onChange(a))}buildTemplateObjects(a){const x=[];for(let N=0;N<a;N++)x.push({index:N,title:this.titles[N]||N+1});return x}}return c.\u0275fac=function(a){return new(a||c)(t.Y36(t.sBO),t.Y36(T))},c.\u0275cmp=t.Xpm({type:c,selectors:[["rating"]],hostBindings:function(a,x){1&a&&t.NdJ("keydown",function(R){return x.onKeydown(R)})},inputs:{max:"max",readonly:"readonly",titles:"titles",customTemplate:"customTemplate"},outputs:{onHover:"onHover",onLeave:"onLeave"},features:[t._Bn([S])],decls:4,vars:4,consts:[["tabindex","0","role","slider","aria-valuemin","0",3,"mouseleave","keydown"],["star",""],["ngFor","",3,"ngForOf"],[1,"sr-only","visually-hidden"],[1,"bs-rating-star",3,"title","mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(a,x){1&a&&(t.TgZ(0,"span",0),t.NdJ("mouseleave",function(){return x.reset()})("keydown",function(R){return x.onKeydown(R)}),t.YNc(1,O,1,1,"ng-template",null,1,t.W1O),t.YNc(3,g,4,11,"ng-template",2),t.qZA()),2&a&&(t.uIk("aria-label",x.ariaLabel)("aria-valuemax",x.range.length)("aria-valuenow",x.value),t.xp6(3),t.Q6J("ngForOf",x.range))},dependencies:[h.sg,h.tP],encapsulation:2,changeDetection:0}),c})(),A=(()=>{class c{static forRoot(){return{ngModule:c,providers:[]}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=t.oAB({type:c}),c.\u0275inj=t.cJS({imports:[h.ez]}),c})()}}]);